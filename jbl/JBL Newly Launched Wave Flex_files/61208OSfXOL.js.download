'use strict';mix_d("SBVideoCards__multi-brand-video-desktop:multi-brand-video-desktop__YyIYEvBw","require exports tslib @p/A @c/metrics @c/pagemarker @c/scoped-dom @c/dom @p/a-ajax @c/logger @p/a-carousel-constants @p/a-carousel-framework @p/a-carousel-strategies @c/aui-carousel @c/aui-utils @c/weblabs @c/aui-truncate @c/browser-operations @c/aui-modal @c/aui-untrusted-ajax".split(" "),function(xc,Ia,n,yc,D,zc,Ac,Ja,Bc,fb,Cc,Dc,Ec,Fc,Gc,Hc,Ic,Jc,Kc,Lc){function K(c){return c&&"object"===typeof c&&
"default"in c?c:{"default":c}}function Mc(c){if(c&&c.__esModule)return c;var f=Object.create(null);c&&Object.keys(c).forEach(function(h){if("default"!==h){var e=Object.getOwnPropertyDescriptor(c,h);Object.defineProperty(f,h,e.get?e:{enumerable:!0,get:function(){return c[h]}})}});f["default"]=c;return f}var y=K(yc),va=K(zc),w=K(Ac),ba=K(Ja),Nc=K(Bc),ha=K(fb),x=K(Cc),pa=K(Dc),qa=K(Ec),gb=K(Fc),Oc=K(Hc),hb=K(Jc),Pc=K(Kc),Qc=K(Lc),ib={},Ka=function(c,f,h){void 0===f&&(f="");void 0===h&&(h=1);f=c+f;ib.hasOwnProperty(f)||
(ib[f]=!0,D.count(c,(D.count(c)||0)+h))},Rc=function(c){Ka(y["default"].capabilities.mobile?"Card:EERU:SharedLib:mobile:render":"Card:EERU:SharedLib:desktop:render");var f=function(e,a){e={$event:{preventDefault:y["default"].$.noop,stopPropagation:y["default"].$.noop},$target:e.getContent().find('[data-a-tab-name="'+a+'"]'),data:{name:"energyEfficiencyTabSet"}};y["default"].trigger("a:declarative:a-tabs:click",e)},h=function(e,a){var d=e&&e.$event,b=e&&e.data||{},g=b.activeTabName,k=b.modalHeight,
l=b.name;d&&d.preventDefault&&d.preventDefault();d&&d.stopPropagation&&d.stopPropagation();d=a.get(l);d||(y["default"].on("a:popover:beforeShow:"+l,function(m){m.popover&&m.popover.getContent&&(m=m.popover.getContent(),m.find(".a-manually-loaded").parent().css("min-height",k),y["default"].loadDescendantImagesManually(m))}),d=a.create(e.$target,b));d.show();f(d,g)};c.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",function(e){y["default"].declarative("card-energy-efficiency-secondary-view",
"click",function(a){Ka("Card:EERU:SharedLib:mobile:click",a&&a.data&&a.data.name||"");h(a,e)})});c.when("a-modal").execute("RegisterEnergyEfficiencyEventDesktop",function(e){y["default"].declarative("card-energy-efficiency-modal","click",function(a){Ka("Card:EERU:SharedLib:desktop:click",a&&a.data&&a.data.name||"");h(a,e)})})},Sc=function(c){c.when("ready").execute("EEBadgeProductFicheResize",function(f){var h=y["default"].$;h(".energyEfficiencyContainer").each(function(e,a){e=h(a).find(".energyEfficiencyProductFicheLabel").first();
a=h(a).find("svg").first();e.parent().outerHeight()>a.outerHeight()&&(e.removeClass("a-size-small"),e.addClass("a-size-micro"),e.parent().outerHeight()>a.outerHeight()&&e.parent().css("line-height","10px"))})})},jb=function(){var c=window.P;Rc(c);Sc(c)},N;(function(c){c.VIDEO_SINGLE_PRODUCT="video-single-product";c.CONFIGURABLE="configurable-horizontal-video";c.MULTI_BRAND_VIDEO="multi-brand-video";c.VIDEO_SINGLE_BRAND="video-single-brand";c.VIDEO_STORE="video-store";c.VIDEO_STORE_PRODUCT_FEATURE=
"video-store-product-feature";c.VIDEO_PRODUCT_COLLECTION="video-product-collection";c.SHORT_FORM_VIDEO="short-form-video";c.THEMATIC_VIDEO="thematic-video";c.VIDEO_SPLIT="video-split"})(N||(N={}));var kb;(function(c){c.SPARKLE_MOBILE="loom-mobile-top-slot";c.SPARKLE_DESKTOP="loom-desktop-top-slot";c.INLINE_MOBILE="loom-mobile-inline-slot";c.INLINE_DESKTOP="loom-desktop-inline-slot";c.BOTTOM_MOBILE="loom-mobile-bottom-slot";c.BOTTOM_DESKTOP="loom-desktop-bottom-slot";c.MOBILE_HQP="mobile-hero-quick-promo";
c.BRAND_DISCOVERY_FEEDS_MOBILE="brand-discovery-feeds-mobile"})(kb||(kb={}));var ra=function(c,f){f=f||w["default"].cardRoot;return!c||f.matches(c)?f:f.querySelector(c)},La=function(c,f){return(f=ra("["+c+"]",f))?f.getAttribute(c):null},L=function(){return ba["default"].cardRoot.ownerDocument},Tc=function(c){var f,h;return null===(h=null===(f=L().defaultView)||void 0===f?void 0:f.matchMedia)||void 0===h?void 0:h.call(f,c)},Uc=function(c,f){c.forEach(function(h){h.classList.remove(f)})},lb=function(){},
Vc=function(c){var f=c.url,h=c.onSuccess,e=c.onError;f?Nc["default"].get(f,{success:function(a){a&&"ok"===a.status?h(a):e()},error:e,abort:e}):e()},Wc=function(c){var f=c.url,h=c.payload,e=c.onSuccess,a=void 0===e?lb:e;c=c.onError;c=void 0===c?lb:c;f?fetch(f,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:h}).then(function(d){if(!d.ok&&0!==d.status)throw Error(d.status+" "+d.statusText);a(d)}).catch(c):c()},Xc=function(c,f,h){var e=new Promise(function(a,d){var b=setTimeout(function(){clearTimeout(b);
a()},f)});c=fetch(c,h);return Promise.race([c,e])},Yc=function(c){try{var f=encodeURIComponent,h=JSON,e=h.stringify,a=JSON.parse(c);var d={adCreativeMetaData:{adId:a.feedbackRequestAdId,advertiserId:a.feedbackRequestAdvertiserId,adNetwork:"aax",adProgramId:1010,adCreativeDetails:[{advertiserIdNS:a.feedbackRequestAdvertiserIdNS,campaignId:a.feedbackRequestCampaignId,selectionSignals:mb(a.feedbackRequestSelectionSignals)}]},adPlacementMetaData:{adElementId:a.adElementId,pageType:a.pageType,slotName:a.slotName}};
return"/af/feedback-link?pl="+f(e.call(h,d))}catch(b){return null}},Ma=function(){var c=ra('[data-id="afb-sponsored"]');c&&(c.style.display="block")},nb=function(c,f){return n.__awaiter(void 0,void 0,void 0,function(){var h,e,a,d;return n.__generator(this,function(b){switch(b.label){case 0:h=f.cardName;e=f.isAdFeedbackForCards;if(!e)return[3,1];Zc(f).then(function(){c.reportAdFeedbackLoadSucceeded()}).catch(function(g){c.reportAdFeedbackLoadFailedFromErr(g.message||"")});return[3,4];case 1:return b.trys.push([1,
3,,4]),[4,$c()];case 2:return b.sent(),c.reportAdFeedbackLoadSucceeded(),(a=w["default"].cardRoot.querySelector('[data-id="afb-content"]'))?a.querySelectorAll("a").forEach(function(g){g.addEventListener("click",c.reportAdFeedbackPopoverOpened)}):D.count(h+"-AdfeedbackElementNotFound"),[3,4];case 3:return d=b.sent(),c.reportAdFeedbackLoadFailedFromErr(d.message||""),[3,4];case 4:return[2]}})})},Zc=function(c){return n.__awaiter(void 0,void 0,void 0,function(){var f,h,e,a,d;return n.__generator(this,
function(b){switch(b.label){case 0:f=La("data-ad-feedback");h=La("data-ad-feedback-label-id");e=c.enableAdFeedback;if(!f||!h)return[2,Promise.reject(Error("data-ad-feedback attributes not found"))];a=JSON.parse(f);d=function(){return{adFeedbackLabelId:h,adCreativeMetaData:{adCreativeDetails:a.creativeDetails.map(function(g,k){var l=g.adId,m=g.advertiserId,p=g.advertiserIdNS,u=g.campaignId,t=mb(g.selectionSignals),v=g.title;(g=g.imageUrl)?(g={url:g,width:0,height:0},g={lowResolutionImage:g,highResolutionImages:[g]}):
g=void 0;return{adId:l,advertiserId:m,adCreativeIndex:k,adNetwork:"aax",advertiserIdNS:p,campaignId:u,selectionSignals:t,title:v,adCreativeImage:g}})}}};b.label=1;case 1:return b.trys.push([1,3,,4]),[4,e(d)];case 2:return b.sent(),[3,4];case 3:return b.sent(),[2,Promise.reject(Error("enableAdFeedbackClient call failed"))];case 4:return[2,Promise.resolve("success")]}})})},$c=function(){var c=La("data-ad-feedback");if(c){var f=Yc(c);return new Promise(function(h,e){Vc({url:f,onSuccess:function(a){try{var d=
a.html,b=ra('[data-id="afb-content"]');if(b&&d){var g=ra('[data-id="afb-sponsored"]');g&&(g.style.display="none");b.innerHTML=d}var k=a.script;if(k){var l=L().createElement("script");l.type="text/javascript";l.innerHTML=k;ra().appendChild(l)}}catch(m){Ma(),e(Error("setHtml or setScript failed"))}h("success")},onError:function(){Ma();e(Error("get ad feedback request failed"))}})})}return Promise.reject(Error("data-ad-feedback attributes not found"))},mb=function(c){var f;if(c){switch(null===(f=c.pastActivity)||
void 0===f?void 0:f.toUpperCase()){case "STORE_ONLY":f=1;break;case "AMAZON_AND_OTHER":f=3;break;case "AMAZON_ONLY":f=2;break;default:f=0}return n.__assign(n.__assign({},c),{pastActivity:f})}},ia;(function(c){c.BETA="beta";c.GAMMA="gamma";c.PROD="prod"})(ia||(ia={}));var Na=function(){function c(){}c.getStage=function(){var f=L().defaultView;return(f=f&&f.location&&f.location.hostname)?"localhost"===f||"mix.corp.amazon.com"===f||"development.amazon.com"===f||/^[a-z]{2}-development\.amazon\.com$/.test(f)?
ia.BETA:/^pre-prod\.amazon\.(com|[a-z]{2})$/.test(f)||/^pre-prod\.amazon\.com?\.[a-z]{2}$/.test(f)||/^[a-z]{2}-pre-prod\.amazon\.com$/.test(f)?ia.GAMMA:ia.PROD:ia.PROD};return c}(),E=function(){function c(){}c.eventListeners={};c.addEventListener=function(f,h,e,a){c.setupListenerIfItDoesntExist(f,h);c.addCallbackWithPriority(f,h,e,a)};c.removeEventListener=function(f,h,e,a){c.removeCallbackWithPriority(f,h,e,a)&&c.removeListenerIfNoLongerNeeded(f,h)};c.removeListenerIfNoLongerNeeded=function(f,h){0===
c.eventListeners[f][h].listeners.length&&(f.removeEventListener(h,c.eventListeners[f][h].generatedCallback),delete c.eventListeners[f][h],Object.keys(c.eventListeners[f]).length&&delete c.eventListeners[f])};c.removeCallbackWithPriority=function(f,h,e,a){if(!c.eventListeners[f]||!c.eventListeners[f][h])return!1;c.eventListeners[f][h].listeners=c.eventListeners[f][h].listeners.filter(function(d){return d.priority!==e||d.callback!==a});return!0};c.setupListenerIfItDoesntExist=function(f,h){c.eventListeners[f]||
(c.eventListeners[f]={});c.eventListeners[f][h]||(c.eventListeners[f][h]={generatedCallback:c.generateCallback(f,h),listeners:[]},f.addEventListener(h,c.eventListeners[f][h].generatedCallback))};c.addCallbackWithPriority=function(f,h,e,a){c.eventListeners[f][h].listeners.push({callback:a,priority:e});c.eventListeners[f][h].listeners.sort(function(d,b){return d.priority-b.priority})};c.generateCallback=function(f,h){return function(e){c.eventListeners[f][h].listeners.forEach(function(a){a.callback&&
a.callback(e)})}};return c}(),ad=["messageId","timestamp"],bd=function(c){var f=function(){},h=function(){var a=function(){if(c.XDomainRequest){var d=new c.XDomainRequest;d.onerror=f;d.ontimeout=f;d.onprogress=f;d.onload=f;d.timeout=0;return d}if(c.XMLHttpRequest){d=new c.XMLHttpRequest;if(!("withCredentials"in d))throw"";return d}return null};return{isSupported:!0,send:function(d,b){if(b&&d){var g=a();if(!g)throw"";g.open("POST",d,!0);g.setRequestHeader&&g.setRequestHeader("Content-type","text/plain");
g.send(b)}}}}(),e=function(){return{isSupported:!!c.navigator.sendBeacon,send:function(a,d){if(a&&d&&!c.navigator.sendBeacon(a,d))throw"";}}}();return{ajaxClient:h,beaconClient:e}},cd=function(){return function(c,f){var h=this;this.flush=function(a){void 0===a&&(a=!1);h.eventsQueue.length&&(a||!1!==h.browserWindow.navigator.onLine)&&(a=h.eventsQueue.length,h.sendWithPriority(h.transportationClient.beaconClient,h.transportationClient.ajaxClient),h.resetBatch(),h.ueCount("EventsSent",a))};this.processEvent=
function(a,d){void 0===d&&(d={n:1});var b=h.unloadHandlerCalled=!1;h.isValidAPICall(a)&&(b=h.addEvent(a,d));b?h.ueCount("ClientEventsSuccess"):h.ueCount("ClientEventsFailed");return b};this.getEventQueueCount=function(){return h.eventsQueue.length};this.buildCompressor=function(){var a=function(k){return k.length>("#"+h.dictionaryIndex).length||"#"===k.charAt(0)},d=function(k){if(k)switch(typeof k){case "number":return!(isNaN(k)||Infinity===k)&&a(k.toString());case "boolean":break;case "string":return a(k);
default:return!0}return!1},b=function(k){h.eventsDictionary[k]="#"+h.dictionaryIndex++;h.reverseEventsDictionary[h.eventsDictionary[k]]=k;return h.eventsDictionary[k]},g=function(k){if(d(k)){var l=0;k instanceof Array?l=2:k instanceof Function?l=null:k instanceof Object&&(l=1);switch(l){case 0:return h.eventsDictionary[k]?h.eventsDictionary[k]:b(k);case 2:var m=[];for(l=0;l<k.length;l++)m[l]=g(k[l]);return m;case 1:l={};for(m in k)Object.prototype.hasOwnProperty.call(k,m)&&(l[h.eventsDictionary[m]?
h.eventsDictionary[m]:b(m)]=-1===ad.indexOf(m)?g(k[m]):k[m]);return l}}return k};return{buildPOSTObject:function(){return h.stringify({cs:{dct:h.reverseEventsDictionary},events:h.eventsQueue})},compressData:g}};this.onBeforeUnload=function(){!0!==h.unloadHandlerCalled&&(h.flush(),h.unloadHandlerCalled=!0)};this.stringify=function(a){try{return JSON.stringify(a)}catch(d){return null}};this.resetBatch=function(){h.eventsQueue=[];h.eventsDictionary={};h.reverseEventsDictionary={};h.dictionaryIndex=0;
h.batchSize=0;h.lowPriorityTimer=0;h.highPriorityTimer=0};this.sendWithClient=function(a){if(null==h.endpoint||""===h.endpoint)h.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var d=h.compressor.buildPOSTObject();return a.send(h.endpoint,d)}throw"";}};this.sendWithPriority=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];for(d=0;d<a.length;d++){var b=a[d];try{return h.sendWithClient(b)}catch(g){}}return null};this.startHighPriorityQueueTimer=function(){0===h.highPriorityFlushInterval?
h.flush():h.highPriorityTimer||(h.highPriorityTimer=setTimeout(h.flush,h.highPriorityFlushInterval,h,!1))};this.startLowPriorityQueueTimer=function(){h.lowPriorityTimer||(h.lowPriorityTimer=setTimeout(h.flush,h.lowPriorityFlushInterval,h,!1))};this.generateMessageId=function(a,d){return a+"-"+d+"-"+h.eventSequence};this.getCurrentISODate=function(){var a=new Date,d=function(b){return 10>b?"0"+b:b};return"function"===typeof Date.prototype.toISOString?a.toISOString():a.getUTCFullYear()+"-"+d(a.getUTCMonth()+
1)+"-"+d(a.getUTCDate())+"T"+d(a.getUTCHours())+":"+d(a.getUTCMinutes())+":"+d(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"};this.decorateEvent=function(a){a.timestamp=h.getCurrentISODate();a.sequence=h.eventSequence;a.messageId=h.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())};this.startTimers=function(a){a.n?h.startHighPriorityQueueTimer():h.startLowPriorityQueueTimer()};this.encodeEvent=function(a,d,b){d=d.length;(499===h.eventsQueue.length||
524288<h.batchSize+d)&&h.flush(!0);h.batchSize+=d;a={data:h.compressor.compressData(a)};h.eventsQueue.push(a);h.startTimers(b)};this.addEvent=function(a,d){h.decorateEvent(a);var b=h.stringify(a);return b?(h.encodeEvent(a,b,d),!0):!1};this.isValidAPIParam=function(a,d){return a&&-1<a.constructor.toString().indexOf(d)};this.isMaxCallsReached=function(){h.eventSequence++;1E3<h.eventSequence&&h.ueCount("SushiClientMaxCallsReached");return 1E3<h.eventSequence};this.isValidAPICall=function(a){return!h.isMaxCallsReached()&&
h.isValidAPIParam(a,"Object")};this.ueCount=function(a,d){try{var b=0===d?0:d||(D.count(h.metricsTag+":"+a)||0)+1;D.count(h.metricsTag+":"+a,b);return b}catch(g){return fb.log("SushiClient.ueCount error: "+g,"ERROR"),0}};this.browserWindow=L().defaultView;this.endpoint=c;this.metricsTag=f;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=
1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=bd(this.browserWindow);this.compressor=this.buildCompressor();E.addEventListener(this.browserWindow,"beforeunload",100,this.onBeforeUnload);E.addEventListener(L(),"visibilitychange",100,this.onBeforeUnload);E.addEventListener(this.browserWindow,"blur",100,this.onBeforeUnload);E.addEventListener(this.browserWindow,"pagehide",100,this.onBeforeUnload);this.browserWindow.app||(this.browserWindow.app={});var e=this.browserWindow.app.willDisappear;
this.browserWindow.app.willDisappear=function(){e&&e();h.onBeforeUnload()}}}(),U;(function(c){c.VIEWED="VIEWED";c.PROGRESS_FIVE_SECONDS="PROGRESS_5_SEC";c.FIRST_QUARTILE="FIRST_QUARTILE";c.MIDPOINT="MIDPOINT";c.THIRD_QUARTILE="THIRD_QUARTILE";c.COMPLETE="COMPLETE";c.UNMUTE="UNMUTE"})(U||(U={}));var V;(function(c){c.ICON_TAP="IconTap";c.VIDEO_OFF_SCREEN="VideoOffScreen";c.INHERIT="Inherit";c.WEBKIT_MUTED="WebkitMuted"})(V||(V={}));var wa;(function(c){c.ICON_TAP="IconTap";c.DEFAULT_OFF="DefaultOff"})(wa||
(wa={}));var ob;(function(c){c.SINGLE_PAGE="SINGLE_PAGE";c.CROSS_PAGE="CROSS_PAGE"})(ob||(ob={}));var pb;(function(c){c.CONTENT_HASH="CONTENT_HASH";c.CAMPAIGN_AND_ADV_ID="CAMPAIGN_AND_ADV_ID"})(pb||(pb={}));var r;(function(c){c.ACE_VIDEO_RESPONSE_RECEIVED="AceVideoResponseReceived";c.ADBLOCK_DETECTED="AdBlockDetected";c.AD_FEEDBACK_LOAD_FAILED_FROM_ERR="AdFeedbackLoadFailedFromErr";c.AD_FEEDBACK_LOAD_SUCCEEDED="AdFeedbackLoadSucceeded";c.AD_FEEDBACK_LOAD_POPOVER_OPENED="AdFeedbackPopoverOpened";c.AUDIO_TOGGLE_ICON_DISPLAYED=
"AudioToggleIconDisplayed";c.BACKGROUND_CLICKED="BackgroundClicked";c.PAUSE_ICON_DISPLAYED="PauseIconDisplayed";c.BRAND_LOGO_CLICKED="BrandLogoClicked";c.BRAND_CTA_LINK_CLICKED="BrandCtaLinkClicked";c.BRAND_NAME_CLICKED="BrandNameClicked";c.CREATOR_LOGO_CLICKED="CreatorLogoClicked";c.CREATOR_CTA_LINK_CLICKED="CreatorCtaLinkClicked";c.CARD_ITEM_RECEIVED="CardItemReceived";c.CAROUSEL_PAGE_CHANGED="CarouselPageChanged";c.CAPTIONS_ENABLED="CaptionsEnabled";c.CAPTIONS_DISABLED="CaptionsDisabled";c.CAPTIONS_LOAD_FAILURE=
"CaptionsLoadFailure";c.CC_ICON_DISPLAYED="CcIconDisplayed";c.CTA_BANNER_CLICKED="CtaBannerClicked";c.DUPE="Dupe";c.DUPE_BY_ADVID_CAMPAIGNID="DupeByAdvIdCampaignId";c.DUPE_BY_CONTENT_HASH="DupeByContentHash";c.EVENT_BANNER_DISPLAYED="EventBannerDisplayed";c.EVENT_BANNER_CLICKED="EventBannerClicked";c.HEADLINE_CLICKED="HeadlineClicked";c.IMMERSIVE_VIDEO_FAILED="ImmersiveVideoFailed";c.IMMERSIVE_VIDEO_LOADED="ImmersiveVideoLoaded";c.MISSING_BACKGROUND_ELEMENT="MissingBackgroundElement";c.MISSING_BRAND_ELEMENT=
"MissingBrandElement";c.MISSING_PRODUCT_ELEMENT="MissingProductElement";c.MISSING_PRODUCT_ELEMENTS="MissingProductElements";c.MISSING_VIDEO_ELEMENT="MissingVideoElement";c.MISSING_CREATOR_ELEMENT="MissingCreatorElement";c.NO_AD_ERROR="NoAdError";c.NO_VIDEO_SRC_ON_ELEMENT="NoVideoSrcOnElement";c.NUMBER_OF_ADS_LESS_THAN_MIN_ERR="NumberOfAdsLessThanMin";c.PLAYBACK_COMPLETED="PlaybackCompleted";c.PLAYBACK_FAILED_TO_START_AFTER_PLAY="PlaybackFailedToStartAfterPlay";c.PRODUCT_CLICKED="ProductClicked";c.PRODUCT_RECEIVED=
"ProductReceived";c.PRODUCT_TWISTER_VARIATION="ProductTwisterVariation";c.MULTI_PRODUCT_COLLECTION="MultiProductCollection";c.TIME_TO_FIRST_FRAME="TimeToFirstFrame";c.CLIENT_LOAD_TO_FIRST_FRAME="ClientLoadToFirstFrame";c.VIDEO_ABORTED="VideoAborted";c.VIDEO_BUFFERING_ENDED="VideoBufferingEnded";c.VIDEO_BUFFERING_STARTED="VideoBufferingStarted";c.VIDEO_CLEARED_ON_HIDDEN_BROWSER="VideoClearedOnHiddenBrowser";c.VIDEO_CLICKED="VideoClicked";c.VIDEO_DURATION_PLAYED="VideoDurationPlayed";c.VIDEO_LOADED_ON_VISIBLE_BROWSER=
"VideoLoadedOnVisibleBrowser";c.VIDEO_OFF_SCREEN="VideoOffScreen";c.VIDEO_ON_SCREEN="VideoOnScreen";c.VIDEO_PAUSED="VideoPaused";c.VIDEO_PAUSED_INITIATED="VideoPausedInitiated";c.VIDEO_PAUSE_BUTTON_TRIGGERED="VideoPauseButtonTriggered";c.VIDEO_PLAY_BUTTON_TRIGGERED="VideoPlayButtonTriggered";c.VIDEO_PLAY_FROM_PAUSE="VideoPlayFromPause";c.VIDEO_PAUSED_ON_AUTOPLAY_DISABLED="VideoPausedOnAutoplayDisabled";c.VIDEO_PLAYBACK_FAILURE="VideoPlaybackFailure";c.VIDEO_PLAYBACK_INITIATED="VideoPlaybackInitiated";
c.VIDEO_PLAYBACK_STARTED="VideoPlaybackStarted";c.VIDEO_PLAY_PROMISE_NOT_SUPPORTED="VideoPlayPromiseNotSupported";c.VIDEO_PREVIEW_IMAGE_NOT_MEDIA_AMAZON="VideoPreviewImageNotMediaAmazon";c.VIDEO_PLAY_PROMISE_REJECTED="VideoPlayPromiseRejected";c.VIDEO_READY_FOR_PLAYBACK="VideoReadyForPlayback";c.VIDEO_SOUND_OFF="VideoSoundOff";c.VIDEO_SOUND_ON="VideoSoundOn";c.VIDEO_VIEW="VideoView";c.VM_AD_UNIT_VIEWED="ViewMetricsAdUnitViewed";c.VM_VIDEO_VIEWED="ViewMetricsVideoViewed";c.VM_VIDEO_PROGRESS_FIVE_SECONDS=
"ViewMetricsVideoProgressFiveSeconds";c.VM_VIDEO_FIRST_QUARTILE="ViewMetricsVideoFirstQuartile";c.VM_VIDEO_MIDPOINT="ViewMetricsVideoMidpoint";c.VM_VIDEO_THIRD_QUARTILE="ViewMetricsVideoThirdQuartile";c.VM_VIDEO_COMPLETE="ViewMetricsVideoComplete";c.VM_VIDEO_UNMUTE="ViewMetricsVideoUnmute";c.VM_POST_FAILURE="ViewMetricsPostFailure";c.WIDGET_ON_SCREEN="WidgetOnScreen";c.MULTI_ASIN_ADS_RECEIVED="MultiAsinAdsReceived";c.PDP_RENDERED_AS_PC="PDPRenderedAsPC"})(r||(r={}));var q;(function(c){c.APP_VERSION=
"appVersion";c.ADVERTISER_ID="advertiserId";c.AUTO_SCROLLED="autoScrolled";c.CAMPAIGN_ID="campaignId";c.CAROUSEL_ITEM_INDEX="carouselItemIndex";c.CAROUSEL_PAGE_NUMBER="carouselPageNumber";c.CC_TOGGLE_CAUSE="ccToggleCause";c.CC_MANDATORY="ccMandatory";c.CC_SRC="ccSrc";c.CLIENT_ID="clientId";c.CLIENT_EXECUTION_MODE="clientExecutionMode";c.CONTINUOUS_PLAYBACK_DURATION_MS="continuousPlaybackDurationMs";c.CURRENT_PAGE_URL="currentPageUrl";c.DEVICE_ENV="deviceEnv";c.DEVICE_MAKE="deviceMake";c.DEVICE_MODEL=
"deviceModel";c.DEVICE_OS="deviceOs";c.DEVICE_PLATFORM_VERSION="devicePlatformVersion";c.DEVICE_TYPE="deviceType";c.DROPPED_FRAMES="droppedFrames";c.ERROR_CODE="errorCode";c.ERROR_MESSAGE="errorMessage";c.EVENT_TYPE="eventType";c.LAYOUT="layout";c.EXPERIENCE="experience";c.EXPERIENCE_VARIATION="experienceVariation";c.HEADLINE="headline";c.HEIGHT="height";c.IMAGE_URL="imageUrl";c.LANGUAGE="language";c.LINK_URL="linkUrl";c.LOAD_TIME_MS="loadTimeMs";c.LOGIC="logic";c.MARKETPLACE_ID="marketplaceId";c.METRICS_IDENTIFIER=
"metricsIdentifier";c.METRICS_SEQUENCE_NUMBER="metricsSequenceNumber";c.NETWORK_TYPE="networkType";c.NUMBER_OF_ADS="numberOfAds";c.PAGE_NUMBER="pageNumber";c.PAGE_TYPE="pageType";c.PERCENT_DOWNLOADED="percentDownloaded";c.PREV_CAROUSEL_PAGE_NUMBER="prevCarouselPageNumber";c.PRODUCT_COMPONENTS="productComponents";c.PRODUCT_INDEX="productIndex";c.PRODUCT_ASIN="asin";c.TWISTER_VARIATIONS_REQUESTED="twisterVariationsRequested";c.TWISTER_VARIATIONS_REQUEST_SUCCEEDED="twisterVariationsRequestSuceeded";
c.TWISTER_VARIATIONS_DETAIL_REQUESTED="twisterVariationsDetailRequested";c.TWISTER_VARIATIONS_CHOSEN="twisterVariationsChosen";c.NUMBER_OF_TWISTER_VARIATIONS_RECEIVED="numberOfTwisterVariationsReceived";c.REASON="reason";c.RETRY_COUNT="retryCount";c.SEARCH_QUERY="searchQuery";c.SOUND_TOGGLE_METHOD="soundToggleMethod";c.STAGE="stage";c.STATUS_CODE="statusCode";c.STORE_CTA="storeCta";c.STORE_NAME="storeName";c.STORE_URL="storeUrl";c.TIME_ON_SCREEN_MS="timeOnScreenMs";c.USER_AGENT="userAgent";c.VIDEO_BOUNDARY_CROSSED_TIME_MS=
"videoBoundaryCrossedTimeMs";c.VIDEO_CURRENT_TIME_MS="videoCurrentTimeMs";c.VIDEO_ORIENTATION="videoOrientation";c.VIDEO_PREVIEW_IMAGE_SRC="videoPreviewImageSrc";c.VIDEO_SRC="videoSrc";c.VIDEO_TOTAL_LENGTH_MS="videoTotalLengthMs";c.VIDEO_TYPE="videoType";c.VIEWPORT_HEIGHT="viewportHeight";c.VIEWPORT_WIDTH="viewportWidth";c.WAS_BUFFERING="wasBuffering";c.WEBLABS="weblabs";c.WIDGET_GROUP_ID="widgetGroupId";c.WIDGET_INDEX="widgetIndex";c.WIDGET_TYPE="widgetType";c.WIDTH="width";c.VIEW_METRICS_FAILURE=
"viewMetricsFailure";c.MULTI_ASIN_ADS_COUNT="MultiAsinAdsCount"})(q||(q={}));var qb={shouldLogViewMetrics:!1,shouldBillViewMetrics:!0,shouldLogAdUnitViewMetrics:!1},rb=function(){return function(c,f,h){var e=this;void 0===h&&(h=qb);this.reportPDPRenderedAsPC=function(a){a=e.newEvent(r.PDP_RENDERED_AS_PC,a);e.recordEvent(a)};this.setClientMetricsContext=function(a){e.clientMetricsContext=a};this.reportWidgetOnScreen=function(){var a=e.newEvent(r.WIDGET_ON_SCREEN,e.resetVideoAdAttributes());e.recordEvent(a)};
this.reportResponseReceived=function(a,d){var b=e.newEvent(r.ACE_VIDEO_RESPONSE_RECEIVED,e.resetVideoAdAttributes());b[q.NUMBER_OF_ADS]=null!==a&&void 0!==a?a:1;d&&(b[q.CLIENT_EXECUTION_MODE]=d);e.recordEvent(b)};this.reportNumAsins=function(a){var d=e.newEvent(r.MULTI_ASIN_ADS_RECEIVED);d[q.MULTI_ASIN_ADS_COUNT]=a;e.recordEvent(d)};this.reportNoAdError=function(){var a=e.newEvent(r.NO_AD_ERROR,e.resetVideoAdAttributes());e.recordEvent(a)};this.reportNumOfAdsLessThanMinRequirement=function(){var a=
e.newEvent(r.NUMBER_OF_ADS_LESS_THAN_MIN_ERR,e.resetVideoAdAttributes());e.recordEvent(a)};this.reportAdFeedbackLoadFailedFromErr=function(a){var d=e.newEvent(r.AD_FEEDBACK_LOAD_FAILED_FROM_ERR,e.resetVideoAdAttributes());d[q.ERROR_MESSAGE]=a;e.recordEvent(d)};this.reportAdFeedbackLoadSucceeded=function(){var a=e.newEvent(r.AD_FEEDBACK_LOAD_SUCCEEDED,e.resetVideoAdAttributes());e.recordEvent(a)};this.reportAdFeedbackPopoverOpened=function(){var a=e.newEvent(r.AD_FEEDBACK_LOAD_POPOVER_OPENED,e.resetVideoAdAttributes());
e.recordEvent(a)};this.reportImmersiveVideoLoaded=function(a){a=e.newEvent(r.IMMERSIVE_VIDEO_LOADED,a);e.recordEvent(a)};this.reportImmersiveVideoFailed=function(a,d){d=e.newEvent(r.IMMERSIVE_VIDEO_FAILED,d);d[q.ERROR_MESSAGE]=a;e.recordEvent(d)};this.reportVideoReadyForPlayback=function(a,d,b,g,k){var l=e.newEvent(r.VIDEO_READY_FOR_PLAYBACK,g);l[q.LOAD_TIME_MS]=a;l[q.RETRY_COUNT]=d;l[q.PERCENT_DOWNLOADED]=b;l[q.VIDEO_TOTAL_LENGTH_MS]=k;l[q.VIDEO_ORIENTATION]=g.videoOrientation;e.recordEvent(l)};
this.reportVideoPlaybackInitiated=function(a,d){d=e.newEvent(r.VIDEO_PLAYBACK_INITIATED,d);d[q.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(d)};this.reportVideoPlaybackStarted=function(a,d,b,g){g=e.newEvent(r.VIDEO_PLAYBACK_STARTED,g);g[q.VIDEO_CURRENT_TIME_MS]=a;g[q.PERCENT_DOWNLOADED]=d;g[q.DROPPED_FRAMES]=b;e.recordEvent(g)};this.reportTimeToFirstFrame=function(a,d,b,g){g=e.newEvent(r.TIME_TO_FIRST_FRAME,g);g[q.LOAD_TIME_MS]=a;g[q.PERCENT_DOWNLOADED]=d;g[q.DROPPED_FRAMES]=b;e.recordEvent(g)};this.reportClientLoadToFirstFrame=
function(a,d,b,g){g=e.newEvent(r.CLIENT_LOAD_TO_FIRST_FRAME,g);g[q.LOAD_TIME_MS]=a;g[q.PERCENT_DOWNLOADED]=d;g[q.DROPPED_FRAMES]=b;e.recordEvent(g)};this.reportVideoBufferingStarted=function(a,d,b,g){g=e.newEvent(r.VIDEO_BUFFERING_STARTED,g);g[q.VIDEO_CURRENT_TIME_MS]=a;g[q.PERCENT_DOWNLOADED]=d;g[q.DROPPED_FRAMES]=b;e.recordEvent(g)};this.reportVideoBufferingEnded=function(a,d,b,g){g=e.newEvent(r.VIDEO_BUFFERING_ENDED,g);g[q.VIDEO_CURRENT_TIME_MS]=a;g[q.PERCENT_DOWNLOADED]=d;g[q.DROPPED_FRAMES]=
b;e.recordEvent(g)};this.reportVideoPlaybackFailure=function(a,d,b,g){g=e.newEvent(r.VIDEO_PLAYBACK_FAILURE,g);g[q.VIDEO_CURRENT_TIME_MS]=a;g[q.ERROR_MESSAGE]=d;g[q.ERROR_CODE]=b;e.recordEvent(g)};this.reportVideoDurationPlayed=function(a,d,b,g){g=e.newEvent(r.VIDEO_DURATION_PLAYED,g);g[q.VIDEO_BOUNDARY_CROSSED_TIME_MS]=a;g[q.PERCENT_DOWNLOADED]=d;g[q.DROPPED_FRAMES]=b;e.recordEvent(g)};this.reportPlaybackCompleted=function(a,d,b){b=e.newEvent(r.PLAYBACK_COMPLETED,b);b[q.VIDEO_CURRENT_TIME_MS]=a;
b[q.DROPPED_FRAMES]=d;e.recordEvent(b)};this.reportVideoOnScreen=function(a,d){d=e.newEvent(r.VIDEO_ON_SCREEN,d);d[q.PERCENT_DOWNLOADED]=a;e.recordEvent(d)};this.reportVideoClearedOnHiddenBrowser=function(a){a=e.newEvent(r.VIDEO_CLEARED_ON_HIDDEN_BROWSER,a);e.recordEvent(a)};this.reportVideoLoadedOnVisibleBrowser=function(a){a=e.newEvent(r.VIDEO_LOADED_ON_VISIBLE_BROWSER,a);e.recordEvent(a)};this.reportVideoOffScreen=function(a,d,b,g){g=e.newEvent(r.VIDEO_OFF_SCREEN,g);g[q.TIME_ON_SCREEN_MS]=a;g[q.WAS_BUFFERING]=
d;g[q.VIDEO_CURRENT_TIME_MS]=b;e.recordEvent(g)};this.reportVideoView=function(a,d,b){void 0===d&&(d=!1);b=e.newEvent(r.VIDEO_VIEW,b);b[q.CONTINUOUS_PLAYBACK_DURATION_MS]=a;e.recordEvent(b);d&&e.sushiClient.flush(!0)};this.reportVideoPauseInitiated=function(a,d){d=e.newEvent(r.VIDEO_PAUSED_INITIATED,d);d[q.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(d)};this.reportVideoPlayFromPause=function(a,d){d=e.newEvent(r.VIDEO_PLAY_FROM_PAUSE,d);d[q.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(d)};this.reportVideoPaused=
function(a,d,b,g){g=e.newEvent(r.VIDEO_PAUSED,g);g[q.VIDEO_CURRENT_TIME_MS]=a;g[q.PERCENT_DOWNLOADED]=d;g[q.DROPPED_FRAMES]=b;e.recordEvent(g)};this.reportVideoSoundOn=function(a,d,b){b=e.newEvent(r.VIDEO_SOUND_ON,b);b[q.VIDEO_CURRENT_TIME_MS]=a;b[q.SOUND_TOGGLE_METHOD]=d;e.recordEvent(b)};this.reportVideoSoundOff=function(a,d,b){b=e.newEvent(r.VIDEO_SOUND_OFF,b);b[q.VIDEO_CURRENT_TIME_MS]=a;b[q.SOUND_TOGGLE_METHOD]=d;e.recordEvent(b)};this.reportCaptionsOn=function(a,d,b){d=e.newEvent(r.CAPTIONS_ENABLED,
d);d[q.LANGUAGE]=b;d[q.CC_TOGGLE_CAUSE]=a;e.recordEvent(d)};this.reportCaptionsOff=function(a,d,b){d=e.newEvent(r.CAPTIONS_DISABLED,d);d[q.LANGUAGE]=b;d[q.CC_TOGGLE_CAUSE]=a;e.recordEvent(d)};this.reportCaptionsLoadFailure=function(a){var d=e.newEvent(r.CAPTIONS_LOAD_FAILURE,a);d[q.CC_SRC]=a.ccSrc;e.recordEvent(d)};this.reportDupe=function(a,d,b){a=e.newEvent(r.DUPE,a);a[q.LOGIC]=d;a[q.REASON]=b;e.recordEvent(a)};this.reportDupeByCampaignAndAdvertiserId=function(a){a=e.newEvent(r.DUPE_BY_ADVID_CAMPAIGNID,
a);e.recordEvent(a)};this.reportDupeByContentHash=function(a){a=e.newEvent(r.DUPE_BY_CONTENT_HASH,a);e.recordEvent(a)};this.reportVideoClicked=function(a,d){d=e.newEvent(r.VIDEO_CLICKED,d,e.getDynamicMetricsAttributes());d[q.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(d)};this.reportProductClicked=function(a,d,b){d=e.newEvent(r.PRODUCT_CLICKED,d,e.getDynamicMetricsAttributes());d[q.VIDEO_CURRENT_TIME_MS]=a;if(b){a=b.productComponents;var g=b.productIndex;d[q.PRODUCT_ASIN]=b.asin;d[q.PRODUCT_INDEX]=g;d[q.PRODUCT_COMPONENTS]=
a}e.recordEvent(d)};this.reportBackgroundClicked=function(a,d){d=e.newEvent(r.BACKGROUND_CLICKED,d,e.getDynamicMetricsAttributes());d[q.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(d)};this.reportProductReceived=function(a,d,b){d=e.newEvent(r.PRODUCT_RECEIVED,d,e.getDynamicMetricsAttributes());d[q.VIDEO_CURRENT_TIME_MS]=a;if(b){a=b.productComponents;var g=b.productIndex;d[q.PRODUCT_ASIN]=b.asin;d[q.PRODUCT_COMPONENTS]=a;d[q.PRODUCT_INDEX]=g}e.recordEvent(d)};this.reportProductTwisterVariations=function(a,
d){a=e.newEvent(r.PRODUCT_TWISTER_VARIATION,a);if(d&&d.twisterVariationProperties){var b=d.twisterVariationProperties;d=b.twisterVariationsRequested;var g=b.twisterVariationsRequestSucceeded,k=b.twisterVariationDetailsRequested,l=b.numberOfTwisterVariationsAvailable;b=b.asinForTwisterChosen;a[q.TWISTER_VARIATIONS_REQUESTED]=null!==d&&void 0!==d?d:!1;a[q.TWISTER_VARIATIONS_REQUEST_SUCCEEDED]=null!==g&&void 0!==g?g:!1;a[q.NUMBER_OF_TWISTER_VARIATIONS_RECEIVED]=l;a[q.TWISTER_VARIATIONS_DETAIL_REQUESTED]=
null!==k&&void 0!==k?k:!1;a[q.TWISTER_VARIATIONS_CHOSEN]=b}e.recordEvent(a)};this.reportProductAttributes=function(a,d){a=e.newEvent(r.MULTI_PRODUCT_COLLECTION,a);if(d){var b=d.productUrl;a[q.PRODUCT_ASIN]=d.asin;a[q.LINK_URL]=b}e.recordEvent(a)};this.reportPlaybackFailedToStartAfterPlay=function(a){a=e.newEvent(r.PLAYBACK_FAILED_TO_START_AFTER_PLAY,a);e.recordEvent(a)};this.reportAudioToggleIconDisplayed=function(a){a=e.newEvent(r.AUDIO_TOGGLE_ICON_DISPLAYED,a);e.recordEvent(a)};this.reportPauseIconDisplayed=
function(a){a=e.newEvent(r.PAUSE_ICON_DISPLAYED,a);e.recordEvent(a)};this.reportCcIconDisplayed=function(a){a=e.newEvent(r.CC_ICON_DISPLAYED,a);e.recordEvent(a)};this.reportVideoPauseButtonTriggered=function(a,d){d=e.newEvent(r.VIDEO_PAUSE_BUTTON_TRIGGERED,d);d[q.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(d)};this.reportVideoPausedOnAutoplayDisabled=function(a){a=e.newEvent(r.VIDEO_PAUSED_ON_AUTOPLAY_DISABLED,a);e.recordEvent(a)};this.reportAdblockDetected=function(a){a=e.newEvent(r.ADBLOCK_DETECTED,
a);e.recordEvent(a)};this.reportVideoAborted=function(a,d){d=e.newEvent(r.VIDEO_ABORTED,d);d[q.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(d)};this.reportVideoPlayPromiseRejected=function(a,d){d=e.newEvent(r.VIDEO_PLAY_PROMISE_REJECTED,d);d[q.ERROR_MESSAGE]=a;e.recordEvent(d)};this.reportVideoPreviewImageNotMediaAmazon=function(a){a=e.newEvent(r.VIDEO_PREVIEW_IMAGE_NOT_MEDIA_AMAZON,a);e.recordEvent(a)};this.reportVideoPlayPromiseNotSupported=function(a){a=e.newEvent(r.VIDEO_PLAY_PROMISE_NOT_SUPPORTED,
a);e.recordEvent(a)};this.reportMissingVideoElement=function(a){a=e.newEvent(r.MISSING_VIDEO_ELEMENT,a);e.recordEvent(a)};this.reportMissingProductElement=function(a){a=e.newEvent(r.MISSING_PRODUCT_ELEMENT,a);e.recordEvent(a)};this.reportMissingProductElements=function(a){a=e.newEvent(r.MISSING_PRODUCT_ELEMENTS,a);e.recordEvent(a)};this.reportMissingBackgroundElement=function(a){a=e.newEvent(r.MISSING_BACKGROUND_ELEMENT,a);e.recordEvent(a)};this.reportMissingBrandElement=function(a,d){var b,g,k;a=
e.newEvent(r.MISSING_BRAND_ELEMENT,a);a[q.STORE_NAME]=null!==(b=null===d||void 0===d?void 0:d.storeName)&&void 0!==b?b:void 0;a[q.STORE_URL]=null!==(g=null===d||void 0===d?void 0:d.storeUrl)&&void 0!==g?g:void 0;a[q.STORE_CTA]=null!==(k=null===d||void 0===d?void 0:d.storeCta)&&void 0!==k?k:void 0;e.recordEvent(a)};this.reportBrandCtaLinkClicked=function(a,d){d=e.newEvent(r.BRAND_CTA_LINK_CLICKED,d);d[q.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(d)};this.reportBrandLogoClicked=function(a,d){d=e.newEvent(r.BRAND_LOGO_CLICKED,
d);d[q.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(d)};this.reportBrandNameClicked=function(a,d){d=e.newEvent(r.BRAND_NAME_CLICKED,d);d[q.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(d)};this.reportCreatorLogoClicked=function(a,d){d=e.newEvent(r.CREATOR_LOGO_CLICKED,d);d[q.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(d)};this.reportCreatorCtaClicked=function(a,d){d=e.newEvent(r.CREATOR_CTA_LINK_CLICKED,d);d[q.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(d)};this.reportCtaBannerClicked=function(a,d){d=e.newEvent(r.CTA_BANNER_CLICKED,
d);d[q.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(d)};this.reportHeadlineClicked=function(a,d){d=e.newEvent(r.HEADLINE_CLICKED,d);d[q.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(d)};this.reportEventBannerDisplayed=function(a,d){d=e.newEvent(r.EVENT_BANNER_DISPLAYED,d);d[q.LAYOUT]=a;e.recordEvent(d)};this.reportEventBannerClicked=function(a,d){d=e.newEvent(r.EVENT_BANNER_CLICKED,d);d[q.LAYOUT]=a;e.recordEvent(d)};this.reportMissingCreatorElement=function(a){a=e.newEvent(r.MISSING_CREATOR_ELEMENT,a);e.recordEvent(a)};
this.reportCarouselPageChanged=function(a,d,b){void 0===b&&(b=!1);var g=e.newEvent(r.CAROUSEL_PAGE_CHANGED);g[q.CAROUSEL_PAGE_NUMBER]=a;g[q.PREV_CAROUSEL_PAGE_NUMBER]=d;g[q.AUTO_SCROLLED]=b;e.recordEvent(g)};this.reportCardItemReceived=function(a,d){d=e.newEvent(r.CARD_ITEM_RECEIVED,d);d[q.CAROUSEL_PAGE_NUMBER]=a;e.recordEvent(d)};this.reportVideoPlayButtonTriggered=function(a,d){d=e.newEvent(r.VIDEO_PLAY_BUTTON_TRIGGERED,d);d[q.CAROUSEL_ITEM_INDEX]=a;e.recordEvent(d)};this.reportViewMetricsAdUnitViewed=
function(a,d,b){if(e.getShouldLogViewMetrics()&&e.getShouldLogAdUnitViewMetrics()){var g=e.newEvent(r.VM_AD_UNIT_VIEWED,a);e.recordEvent(g);d={p:Math.round(100*b),t:parseFloat((d/1E3).toFixed(3))};e.emitViewMetrics(U.VIEWED,a,d)}};this.reportViewMetricsVideoViewed=function(a,d,b){if(e.getShouldLogViewMetrics()){var g=e.newEvent(r.VM_VIDEO_VIEWED,a);e.recordEvent(g);e.getShouldLogAdUnitViewMetrics()||(d={p:Math.round(100*b),t:parseFloat((d/1E3).toFixed(3))},e.emitViewMetrics(U.VIEWED,a,d))}};this.reportViewMetricsVideoProgressFiveSeconds=
function(a){if(e.getShouldLogViewMetrics()){var d=e.newEvent(r.VM_VIDEO_PROGRESS_FIVE_SECONDS,a);e.recordEvent(d);e.emitViewMetrics(U.PROGRESS_FIVE_SECONDS,a)}};this.reportViewMetricsVideoFirstQuartile=function(a){if(e.getShouldLogViewMetrics()){var d=e.newEvent(r.VM_VIDEO_FIRST_QUARTILE,a);e.recordEvent(d);e.emitViewMetrics(U.FIRST_QUARTILE,a)}};this.reportViewMetricsVideoMidpoint=function(a){if(e.getShouldLogViewMetrics()){var d=e.newEvent(r.VM_VIDEO_MIDPOINT,a);e.recordEvent(d);e.emitViewMetrics(U.MIDPOINT,
a)}};this.reportViewMetricsVideoThirdQuartile=function(a){if(e.getShouldLogViewMetrics()){var d=e.newEvent(r.VM_VIDEO_THIRD_QUARTILE,a);e.recordEvent(d);e.emitViewMetrics(U.THIRD_QUARTILE,a)}};this.reportViewMetricsVideoComplete=function(a){if(e.getShouldLogViewMetrics()){var d=e.newEvent(r.VM_VIDEO_COMPLETE,a);e.recordEvent(d);e.emitViewMetrics(U.COMPLETE,a)}};this.reportViewMetricsVideoUnmute=function(a){if(e.getShouldLogViewMetrics()){var d=e.newEvent(r.VM_VIDEO_UNMUTE,a);e.recordEvent(d);e.emitViewMetrics(U.UNMUTE,
a)}};this.reportViewMetricsPostRequestFailure=function(a,d,b){b=e.newEvent(r.VM_POST_FAILURE,b);b[q.VIEW_METRICS_FAILURE]=a;b[q.ERROR_MESSAGE]=d;e.recordEvent(b)};this.emitViewMetrics=function(a,d,b){void 0===b&&(b={});if(e.getShouldBillViewMetrics()){var g=d.instrumentationPixelUrl;void 0===g||""===g?e.reportViewMetricsPostRequestFailure(a,"instrumentationPixelUrl is empty or undefined",d):(b=JSON.stringify({v:n.__assign(n.__assign({},b),{def:"iab",event:a}),programType:"SBV"}),g="/"===g.substr(-1)?
g+"v/":g+"/v/",Wc({onError:function(k){e.reportViewMetricsPostRequestFailure(a,k.message,d)},payload:b,url:g+encodeURI(b)}))}};this.getShouldLogViewMetrics=function(){return e.viewMetricOptions.shouldLogViewMetrics};this.getShouldLogAdUnitViewMetrics=function(){return e.viewMetricOptions.shouldLogAdUnitViewMetrics};this.getShouldBillViewMetrics=function(){return e.viewMetricOptions.shouldLogViewMetrics&&e.viewMetricOptions.shouldBillViewMetrics};this.recordEvent=function(a){e.sushiClient.processEvent(a)};
this.resetVideoAdAttributes=function(){return{advertiserId:void 0,campaignId:void 0,contentHash:void 0,headline:void 0,storeCta:void 0,imageUrl:void 0,instrumentationPixelUrl:void 0,linkUrl:void 0,metricsIdentifier:void 0,videoPreviewImageSrc:void 0,videoSrc:void 0}};this.getDynamicMetricsAttributes=function(){var a,d;return null===(d=null===(a=e.clientMetricsContext)||void 0===a?void 0:a.getDynamicMetricsAttributes)||void 0===d?void 0:d.call(a)};this.newEvent=function(a,d,b){var g=e.getDynamicMetricsAttributes(),
k=n.__assign,l=n.__assign,m=n.__assign,p=n.__assign,u=L().defaultView,t=u.innerWidth;u=u.innerHeight;var v=w["default"].cardRoot.getBoundingClientRect(),z=v.width;v=v.height;d=k.call(n,l.call(n,m.call(n,p.call(n,{},{width:void 0===z?0:z,height:void 0===v?0:v,viewportWidth:t,viewportHeight:u}),e.defaultAttributes),d),b||g);d[q.EVENT_TYPE]=a;d[q.METRICS_SEQUENCE_NUMBER]=e.metricsSequenceNumber++;d[q.NETWORK_TYPE]=navigator&&navigator.connection&&navigator.connection.type;return d};this.browserWindow=
L().defaultView;this.metricsSequenceNumber=0;this.sushiClient=new cd(f,"SBVClientMetrics");this.defaultAttributes=n.__assign({},c);this.defaultAttributes[q.USER_AGENT]=navigator.userAgent;this.viewMetricOptions=n.__assign(n.__assign({},qb),h);(f=this.browserWindow&&this.browserWindow.location&&this.browserWindow.location.href)&&(this.defaultAttributes[q.CURRENT_PAGE_URL]=f);c.pageNumber&&(c=parseInt(c.pageNumber,10),isNaN(c)||(this.defaultAttributes[q.PAGE_NUMBER]=c))}}(),sb=function(c){var f=Na.getStage();
switch(c){default:return"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client."+f+".events";case "A1F83G8C2ARO7P":case "A1PA6795UKMFR9":case "A13V1IB3VIYZZH":case "APJ6JRA9NG5V4":case "A3HOBANJMCMD83":case "A1RKKUPIHCS9HS":case "AJZF8LZ1EJVJN":case "A21TJRUUN4KGV":case "A2XZLSVIQ0F4JT":return"https://unagi-eu.amazon.com/1/events/com.amazon.eel.sbv.client."+f+".eu";case "A1VC38T7YXB528":return"https://unagi-fe.amazon.com/1/events/com.amazon.eel.sbv.client."+f+".fe"}},dd=["motorola edge",
"Moto"],tb=function(){return y["default"].capabilities.isAmazonApp?"app":"web"},ub=function(){var c=y["default"].capabilities.android?"android":y["default"].capabilities.ios?"ios":"unrecognized";"unrecognized"===c&&dd.forEach(function(f){navigator.userAgent.includes(f)&&(c="android")});return"desktop"===xa()?"unrecognized":c},xa=function(){return y["default"].capabilities.mobile?"mobile":y["default"].capabilities.tablet?"tablet":"desktop"},ja;(ja||(ja={})).SEARCH_GRID="sbv-transition-search-grid";
var T;(function(c){c.SEARCH_GRID="sbv-search-grid";c.SINGLE_ELEMENT="single-element"})(T||(T={}));var ed=y["default"].$,hd=function(){function c(){this.strategy={init:this.init,repaint:this.repaint,resize:this.resize}}c.prototype.register=function(){qa["default"].display[T.SEARCH_GRID]||pa["default"].registerStrategy("display",T.SEARCH_GRID,this.strategy)};c.prototype.init=function(f){var h=f.getAttr(x["default"].FIRST_VISIBLE_ITEM);f.setAttr(x["default"].MIN_GUTTER,0);f.setAttr("currentGutter",0);
this.repaint(f);1<h&&(h=Math.ceil(h/f.getAttr(x["default"].PAGE_SIZE)),f.gotoPage(h));fd(f)};c.prototype.repaint=function(f){var h=f.getDimensions().viewport.width,e=f.dom.$carousel.children("li").get(0).getBoundingClientRect();e=e.width?e.width:e.right-e.left;var a=gd(f,h,e);var d=f.dom.$carousel;var b=d.children("li"),g=b.length,k=f.getAttr(x["default"].PAGE_SIZE),l=f.getAttr(x["default"].SET_SIZE);b=b.first().outerWidth(!0);h=k>=l?h:g*b;d.css("width",h+"px");h={carousel:{outerWidth:d.outerWidth(),
width:h},items:[]};for(d=0;d<g;d++)h.items.push({outerWidth:b,width:e});f.updateDimensionsCache(h);f.gotoIndex(a,{animationDuration:0,ignorePause:!0});f.triggerEvent("repaint")};c.prototype.resize=function(f,h){h.viewport&&void 0!==h.viewport.width&&this.repaint(f)};c.prototype.getStrategy=function(){return this.strategy};return c}(),fd=function(c){c.onChange(x["default"].PAGE_NUMBER,function(){c.getAttr(x["default"].HIDE_OFF_SCREEN)&&c.dom.$carousel.children("li").css("visibility","")});c.onChange(x["default"].ANIMATING,
function(f){if(!f&&c.getAttr(x["default"].HIDE_OFF_SCREEN)){var h=c.getAttr(x["default"].FIRST_VISIBLE_ITEM)-1;var e=h+c.getAttr(x["default"].PAGE_SIZE)-1;c.dom.$carousel.children("li").each(function(a,d){a=a>=h&&a<=e;ed(d).css("visibility",a?"":"hidden")})}})},gd=function(c,f,h){var e=c.getAttr(x["default"].TOTAL_PAGES),a=c.getAttr(x["default"].PAGE_NUMBER),d=c.getAttr(x["default"].FIRST_VISIBLE_ITEM),b=c.getAttr(x["default"].HIDE_OFF_SCREEN),g=c.dom.$carousel.children("li");f=id(c,f,h);var k=(a-
1)*f+1;c.setAttr(x["default"].PAGE_SIZE,f);a>e?(d=(e-1)*f+1,c.setAttr(x["default"].PAGE_NUMBER,e),c.setAttr(x["default"].FIRST_VISIBLE_ITEM,d)):d!==k&&(e=Math.ceil(d/f),d=(e-1)*f+1,c.setAttr(x["default"].PAGE_NUMBER,e),c.setAttr(x["default"].FIRST_VISIBLE_ITEM,d));var l=d-1;var m=l+f-1;g.each(function(p,u){u.style.visibility=!b||p>=l&&p<=m?"":"hidden";u.style.width=h+"px"});return d},id=function(c,f,h){c=0;if(0<h)for(;-.5<f;)c++,f-=h;0>f&&c--;return y["default"].isFiniteNumber(c)&&0<c?c:1},jd=function(){return function(){var c=
this;this.updateRepaint=function(f){f.repaint=function(h){var e=h.getAttr("minimum_gutter_width"),a=h.getAttr("set_size"),d=h.dom.$carousel.children("li"),b=d.width();b-=2*e;d.css({width:b+"px",margin:"0 "+e+"px"});e=b+2*e;d=e*a;h.dom.$carousel.width(d);for(d={carousel:{width:d},items:[]};a--;)d.items[a]={width:b,outerWidth:e};h.updateDimensionsCache(d);h.gotoIndex(h.getAttr("firstVisibleItem"),{animationDuration:0,ignorePause:!0});h.triggerEvent("repaint")}};this.getStrategy=function(){return c.strategy};
this.register=function(){qa["default"].display[T.SINGLE_ELEMENT]||pa["default"].registerStrategy("display",T.SINGLE_ELEMENT,c.strategy)};this.strategy=y["default"].copy(qa["default"].display.single);this.updateRepaint(this.strategy)}}(),kd=function(){function c(){}c.registerStrategy=function(f){switch(f){case T.SEARCH_GRID:(new hd).register();break;case T.SINGLE_ELEMENT:(new jd).register();break;default:throw Error("Invalid carousel Strategy type");}};return c}(),nd=function(){return function(){var c=
this;this.register=function(){qa["default"].transition[ja.SEARCH_GRID]||pa["default"].registerStrategy("transition",ja.SEARCH_GRID,c.strategy)};this.gotoPage=function(f,h,e){var a=f.getAttr(x["default"].TOTAL_PAGES),d=f.getAttr(x["default"].CIRCULAR),b=f.getAttr(x["default"].PAGE_SIZE),g=f.getAttr(x["default"].SET_SIZE),k=b*(h-1)+1;e=e||{};vb(f,e);0<h&&h<=a&&f.setAttr(x["default"].PAGE_NUMBER,h);!d&&1>h?(h=1,e.animationDuration=NaN):!d&&h>a&&(h=a,e.animationDuration=Math.pow(f.getAttr(x["default"].ANIMATION_SPEED),
f.getAttr(x["default"].SPRINGINESS)));h===a&&(k=Math.min(k,g-b+1));c.gotoIndex(f,k,e)};this.gotoIndex=function(f,h,e){e=e||{};vb(f,e);var a=f.getAttr(x["default"].CIRCULAR)&&!f.getAttr(x["default"].CURRENTLY_WRAPPING);var d=e.callback;var b=null;var g=f.getViewportWidth();ld(f,h);f.setAttr(x["default"].FIRST_VISIBLE_ITEM,h);if(1>h){if(a){b=-g;var k=function(){d&&d();c.wrapToLast(f)}}}else h>f.getAttr(x["default"].SET_SIZE)?a&&(b=f.getAttr(x["default"].CURRENT_PIXEL)+g,k=function(){d&&d();c.wrapToFirst(f)}):
b=f.getItemOffset(h);md(f,e,k,d);null!==b&&c.strategy.gotoPixel(f,b,e)};this.getStrategy=function(){return c.strategy};this.strategy=y["default"].copy(qa["default"].transition.slideHorizontal);this.strategy.gotoPage=this.gotoPage;this.strategy.gotoIndex=this.gotoIndex}}(),ld=function(c,f){var h=c.getAttr(x["default"].TOTAL_PAGES),e=c.getAttr(x["default"].PAGE_NUMBER),a=c.getAttr(x["default"].PAGE_SIZE),d=c.getAttr(x["default"].SET_SIZE),b=Math.ceil(f/a);f===d-a+1&&b!==e&&(b=h);b!==e&&0<b&&b<=h&&c.setAttr(x["default"].PAGE_NUMBER,
b)},vb=function(c,f){(void 0===f.animationDuration||0<f.animationDuration)&&!f.silent&&c.setAttr(x["default"].ANIMATING,!0)},md=function(c,f,h,e){h?(c.setAttr(x["default"].CURRENTLY_WRAPPING,!0),f.callback=h,f.easingFunction=f.easingFunction||c.getAttr(x["default"].WRAP_EASING),f.animationSpeed=1.3*(y["default"].isFiniteNumber(f.animationSpeed)?f.animationSpeed:c.getAttr(x["default"].ANIMATION_SPEED))):f.callback=e},od=function(){function c(){}c.registerStrategy=function(f){switch(f){case ja.SEARCH_GRID:(new nd).register();
break;default:throw Error("Invalid carousel Strategy type");}};return c}(),W;(function(c){c.CARD_ITEM='[data-type="mbvItem"]';c.BRAND_CONTAINER='[data-type="brandContainer"]';c.BRAND_LOGO_HEADER_CONTAINER='[data-type="brandedLogoHeaderContainer"]'})(W||(W={}));var ca;(ca||(ca={})).SEARCH_GRID="searchGrid";var sa;(function(c){c.BrandVideoProduct="BrandVideoProduct";c.BrandVideoStore="BrandVideoStore";c.ProductWithTintedCta="ProductWithTintedCta"})(sa||(sa={}));var Y=function(){function c(){}c.navigatorInternal=
navigator;c.isIOS=function(){return y["default"].capabilities.ios};c.isIOSWebView=function(){return y["default"].capabilities.isAmazonApp&&y["default"].capabilities.ios};c.isWebView=function(){return y["default"].capabilities.isAmazonApp};c.isSafari=function(){return!(!c.navigatorInternal.vendor||!c.navigatorInternal.vendor.match(/apple/i))};return c}(),wb=function(){return function(c,f,h,e){var a=this;this.viewMetricsHistoryMap={isViewedLogged:!1,isAdUnitViewedLogged:!1,isProgressFiveSecondsLogged:!1,
isFirstQuartileLogged:!1,isMidpointLogged:!1,isThirdQuartileLogged:!1,isCompleteLogged:!1,isUnmuteLogged:!1};this.onVideoTimeUpdated=function(d,b,g,k){var l=a.adUnitManager?g:d,m=0;a.adUnitManager&&(m=a.adUnitManager.calculateVideoDurationTotalMsRelativeToAdUnit(g));!a.viewMetricsHistoryMap.isAdUnitViewedLogged&&2E3<=m&&(a.viewMetricsHistoryMap.isAdUnitViewedLogged=!0,g=a.adUnitManager.getAdUnitPercentInView(),a.metricsManager.reportViewMetricsAdUnitViewed(a.videoAdAttributes,m,g));!a.viewMetricsHistoryMap.isViewedLogged&&
2E3<=l&&(a.viewMetricsHistoryMap.isViewedLogged=!0,a.metricsManager.reportViewMetricsVideoViewed(a.videoAdAttributes,l,k));!a.viewMetricsHistoryMap.isProgressFiveSecondsLogged&&5E3<=d&&(a.viewMetricsHistoryMap.isProgressFiveSecondsLogged=!0,a.metricsManager.reportViewMetricsVideoProgressFiveSeconds(a.videoAdAttributes));!a.viewMetricsHistoryMap.isFirstQuartileLogged&&d>=.25*b&&(a.viewMetricsHistoryMap.isFirstQuartileLogged=!0,a.metricsManager.reportViewMetricsVideoFirstQuartile(a.videoAdAttributes));
!a.viewMetricsHistoryMap.isMidpointLogged&&d>=.5*b&&(a.viewMetricsHistoryMap.isMidpointLogged=!0,a.metricsManager.reportViewMetricsVideoMidpoint(a.videoAdAttributes));!a.viewMetricsHistoryMap.isThirdQuartileLogged&&d>=.75*b&&(a.viewMetricsHistoryMap.isThirdQuartileLogged=!0,a.metricsManager.reportViewMetricsVideoThirdQuartile(a.videoAdAttributes))};this.onVideoReadyForPlayback=function(d,b,g,k){a.metricsManager.reportVideoReadyForPlayback(d,b,g,a.videoAdAttributes,k)};this.onTimeToFirstFrame=function(d,
b,g){a.metricsManager.reportTimeToFirstFrame(d,b,g,a.videoAdAttributes)};this.onClientLoadToFirstFrame=function(d,b,g){a.metricsManager.reportClientLoadToFirstFrame(d,b,g,a.videoAdAttributes)};this.onVideoPlaybackFailure=function(d,b,g){a.metricsManager.reportVideoPlaybackFailure(d,g,b,a.videoAdAttributes)};this.onVideoPlaying=function(d,b,g){a.metricsManager.reportVideoPlaybackStarted(d,b,g,a.videoAdAttributes)};this.onVideoPlaybackPaused=function(d,b,g){a.metricsManager.reportVideoPaused(d,b,g,
a.videoAdAttributes)};this.onPlaybackCompleted=function(d,b){a.viewMetricsHistoryMap.isCompleteLogged||(a.viewMetricsHistoryMap.isCompleteLogged=!0,a.metricsManager.reportViewMetricsVideoComplete(a.videoAdAttributes));a.metricsManager.reportPlaybackCompleted(d,b,a.videoAdAttributes);if(a.eventHandlerOptions&&a.eventHandlerOptions.onPlaybackCompletedCallback)a.eventHandlerOptions.onPlaybackCompletedCallback()};this.onVideoBufferingStarted=function(d,b,g){a.bufferStartTimeMs=d;a.metricsManager.reportVideoBufferingStarted(d,
b,g,a.videoAdAttributes)};this.onVideoBufferingEnded=function(d,b,g){a.bufferStartTimeMs=0;a.metricsManager.reportVideoBufferingEnded(d,b,g,a.videoAdAttributes)};this.onVideoPlaybackFailedAfterPlayError=function(){a.metricsManager.reportPlaybackFailedToStartAfterPlay(a.videoAdAttributes)};this.onVideoAborted=function(d){a.metricsManager.reportVideoAborted(d,a.videoAdAttributes)};this.onVideoPlayPromiseRejected=function(d){a.metricsManager.reportVideoPlayPromiseRejected(d,a.videoAdAttributes)};this.onVideoPlayPromiseNotSupported=
function(){a.metricsManager.reportVideoPlayPromiseNotSupported(a.videoAdAttributes)};this.onVideoMuted=function(d,b){a.metricsManager.reportVideoSoundOff(d,b,a.videoAdAttributes)};this.onVideoUnmuted=function(d,b){a.viewMetricsHistoryMap.isUnmuteLogged||(a.viewMetricsHistoryMap.isUnmuteLogged=!0,a.metricsManager.reportViewMetricsVideoUnmute(a.videoAdAttributes));a.metricsManager.reportVideoSoundOn(d,b,a.videoAdAttributes)};this.onCcOn=function(d,b){a.metricsManager.reportCaptionsOn(d,a.videoAdAttributes,
b)};this.onCcOff=function(d,b){a.metricsManager.reportCaptionsOff(d,a.videoAdAttributes,b)};this.onCcLoadFailure=function(){a.metricsManager.reportCaptionsLoadFailure(a.videoAdAttributes)};this.onVideoDurationPlayed=function(d,b,g){a.metricsManager.reportVideoDurationPlayed(d,b,g,a.videoAdAttributes)};this.onVideoClicked=function(d){var b;a.metricsManager.reportVideoClicked(d,a.videoAdAttributes);if(null===(b=a.eventHandlerOptions)||void 0===b?0:b.onImmersiveVideoCallback)a.eventHandlerOptions.onImmersiveVideoCallback(a.videoAdAttributes)};
this.onVideoOnScreen=function(d){a.metricsManager.reportVideoOnScreen(d,a.videoAdAttributes)};this.onVideoOffScreen=function(d,b){a.metricsManager.reportVideoOffScreen(d,0!==a.bufferStartTimeMs,b,a.videoAdAttributes)};this.onVideoPlaybackInitiated=function(d){a.metricsManager.reportVideoPlaybackInitiated(d,a.videoAdAttributes)};this.onVideoPlayFromPause=function(d){a.metricsManager.reportVideoPlayFromPause(d,a.videoAdAttributes)};this.onVideoPauseInitiated=function(d){a.metricsManager.reportVideoPauseInitiated(d,
a.videoAdAttributes)};this.onVideoPreviewImageNotMediaAmazon=function(){a.metricsManager.reportVideoPreviewImageNotMediaAmazon(a.videoAdAttributes)};this.onVideoPauseButtonTriggered=function(d){a.metricsManager.reportVideoPauseButtonTriggered(d,a.videoAdAttributes)};this.onVideoViewed=function(d){a.metricsManager.reportVideoView(d,Y.isIOSWebView(),a.videoAdAttributes)};this.onVideoClearedOnHiddenBrowser=function(){a.metricsManager.reportVideoClearedOnHiddenBrowser(a.videoAdAttributes)};this.onVideoLoadedOnVisibleBrowser=
function(){a.metricsManager.reportVideoLoadedOnVisibleBrowser(a.videoAdAttributes)};this.onAudioToggleIconDisplayed=function(){a.metricsManager.reportAudioToggleIconDisplayed(a.videoAdAttributes)};this.onPauseIconDisplayed=function(){a.metricsManager.reportPauseIconDisplayed(a.videoAdAttributes)};this.onCcIconDisplayed=function(){a.metricsManager.reportCcIconDisplayed(a.videoAdAttributes)};this.onVideoPausedDueToAutoplayDisabled=function(){a.metricsManager.reportVideoPausedOnAutoplayDisabled(a.videoAdAttributes)};
this.onAdblockDetected=function(){a.metricsManager.reportAdblockDetected(a.videoAdAttributes)};this.metricsManager=c;this.videoAdAttributes=f;this.bufferStartTimeMs=0;this.eventHandlerOptions=h;this.adUnitManager=e}}(),xb=function(){return function(c,f){var h=this;this.reportIfBoundaryCrossed=function(e,a,d,b,g){h.isValidBoundaryTime(d)&&(e<=a?h.insideInterval(e,a)&&h.callback(h.boundaryTime,b,g):(h.insideInterval(0,a)||h.insideInterval(e,d))&&h.callback(h.boundaryTime,b,g))};this.insideInterval=
function(e,a){return h.boundaryTime>e&&h.boundaryTime<=a};this.isValidBoundaryTime=function(e){return 0<=h.boundaryTime&&h.boundaryTime<=e};this.boundaryTime=c;this.callback=f}}(),Oa=function(){function c(){}c.getPercentInView=function(f,h){var e=L().defaultView;try{var a=e.innerWidth||e.clientWidth||0,d=e.innerHeight||e.clientHeight||0,b=c.getNormalizedBoundingRect(f),g=c.getViewableSegment(b.top,b.bottom,d),k=c.getViewableSegment(b.left,b.right,a);f=void 0;f=(null===h||void 0===h?0:h.shouldAreaOnlyUseElementWidth)?
b.width:Math.min(b.width,a);return g*k/(b.height*f)}catch(l){return 0}};c.getViewableSegment=function(f,h,e){return f>e&&h>e?0:Math.min(0<f?e-f:0<h?Math.min(h,e):0,h-f)};c.getNormalizedBoundingRect=function(f){f=f.getBoundingClientRect();f.height=f.height||f.bottom-f.top;f.width=f.width||f.right-f.left;return f};return c}(),I;(function(c){c.PLAYING="playing";c.PAUSED="paused";c.BUFFERING="buffering";c.INITIATED="initiated";c.END="ended"})(I||(I={}));var pd=function(){return function(c,f,h,e,a,d){var b=
this;void 0===h&&(h=[]);void 0===e&&(e=[]);void 0===a&&(a=w["default"].cardRoot);var g,k;this.generateNewTextTrack=function(m){if(!m||!m.cues||0===m.cues.length)return null;var p=b.videoElement.addTextTrack("captions"),u=m.cues;m=function(v){var z=u[v];v=z.startTime;var B=z.endTime;z=z.text.trim();var G=z.split(" "),O=z.length-G.length,aa=B-v,H=v,A=[];G.forEach(function(Q){var R=A.join(" ");if(32<R.length+Q.length){var F=H+(R.length-A.length+1)/O*aa;p.addCue(new VTTCue(H,F,R));H=F;A=[]}A.push(Q)});
0<A.length&&p.addCue(new VTTCue(H,B,A.join(" ")))};for(var t=0;t<u.length;t++)m(t);p.mode="hidden";return p};this.play=function(m){b.initiatedPlayTime||(b.initiatedPlayTime=m);return b.playbackState!==I.PLAYING&&b.videoElement.paused?(m=b.playInternal())?m:Promise.reject("NotSupported"):Promise.resolve()};this.pause=function(){b.playbackState!==I.PAUSED&&b.playbackState===I.PLAYING&&(b.playbackState=I.PAUSED,b.videoElement.pause())};this.seekToStart=function(){b.accrueContinuousPlaybackDuration(b.getCurrentTimeMs());
b.lastOnTimeUpdateCurrentTimeMs=0;b.videoElement.currentTime=0;b.ccText&&(b.ccText.innerHTML="")};this.mute=function(){b.videoElement.muted=!0};this.unmute=function(){b.videoElement.muted=!1};this.isMuted=function(){return b.videoElement.muted};this.getCaptionLang=function(){return null!=b.videoElement.textTracks[0].language?b.videoElement.textTracks[0].language:"No Language Given"};this.getCurrentTimeMs=function(){return Math.round(1E3*b.videoElement.currentTime)};this.getDurationMs=function(){return Math.round(1E3*
b.videoElement.duration)};this.getDroppedFrames=function(){return b.videoElement.getVideoPlaybackQuality?b.videoElement.getVideoPlaybackQuality().droppedVideoFrames:void 0!==b.videoElement.webkitDroppedFrameCount?b.videoElement.webkitDroppedFrameCount:-1};this.getContinuousPlaybackDurationMs=function(){return b.continuousDurationAccruedPlayTimeMs+(b.getCurrentTimeMs()-b.continuousDurationStartTimeMs)};this.resetContinuousPlaybackDurationMs=function(){var m=b.getCurrentTimeMs();b.continuousDurationAccruedPlayTimeMs=
0;m===b.getDurationMs()?b.continuousDurationStartTimeMs=0:b.continuousDurationStartTimeMs=m;b.continuousDurationBoundaryChecks.forEach(function(p){p.resetReported()})};this.getPercentDownloaded=function(){var m=b.videoElement.buffered;if(!m)return 0;for(var p=0,u=0;u<m.length;u++)p+=m.end(u)-m.start(u);return p/b.videoElement.duration};this.load=function(){b.videoElement.load()};this.loadVideoOnBrowserVisible=function(){var m=b.videoElement.dataset.videoSource;!b.videoElement.src&&m&&(b.videoElement.src=
m,b.load(),b.eventHandler.onVideoLoadedOnVisibleBrowser())};this.clear=function(){b.videoElement.dataset.videoSource=b.videoElement.src;b.videoElement.removeAttribute("src");b.load();b.eventHandler.onVideoClearedOnHiddenBrowser()};this.hasSrcAttr=function(){return b.videoElement.hasAttribute("src")};this.getDateTime=function(){return Date.now()};this.playInternal=function(){return b.videoElement.play()};this.videoOnCanPlayEvent=function(){b.stopVideoLoadingAnimation();if(!b.assetLoaded){var m=b.getDateTime()-
b.loadStartTime;b.eventHandler.onVideoReadyForPlayback(m,b.retryLoadCount,b.getPercentDownloaded(),b.getDurationMs());b.assetLoaded=!0}};this.stopVideoLoadingAnimation=function(){if(b.isVideoLoadingAnimationVisible){var m=b.videoContainer.querySelector("[data-type=loadingAnimation]");m&&(m.style.visibility="hidden",b.isVideoLoadingAnimationVisible=!1)}};this.videoOnErrorEvent=function(){!b.assetLoaded&&3>b.retryLoadCount?(b.retryLoadCount++,setTimeout(b.videoElement.load.bind(b.videoElement),2E3)):
(b.stopVideoLoadingAnimation(),b.handleVideoPlaybackFailureEvent())};this.videoOnPlayingEvent=function(){b.handleFirstFramePlayedEvent();if(b.playbackState===I.BUFFERING)b.eventHandler.onVideoBufferingEnded(b.getCurrentTimeMs(),b.getPercentDownloaded(),b.getDroppedFrames());if(b.playbackState!==I.END)b.eventHandler.onVideoPlaying(b.getCurrentTimeMs(),b.getPercentDownloaded(),b.getDroppedFrames());b.playbackState=I.PLAYING};this.videoOnPauseEvent=function(){b.videoElement.currentTime!==b.videoElement.duration&&
(b.playbackState=I.PAUSED,b.eventHandler.onVideoPlaybackPaused(b.getCurrentTimeMs(),b.getPercentDownloaded(),b.getDroppedFrames()))};this.videoOnEndedEvent=function(){return n.__awaiter(b,void 0,void 0,function(){return n.__generator(this,function(m){switch(m.label){case 0:return this.playbackState=I.END,this.ccText&&(this.ccText.innerHTML=""),this.accrueContinuousPlaybackDuration(this.getDurationMs()),this.eventHandler.onPlaybackCompleted(this.getDurationMs(),this.getDroppedFrames()),this.videoElement.dataset.disableLooping&&
"false"!==this.videoElement.dataset.disableLooping?[3,2]:[4,this.playInternal()];case 1:m.sent(),m.label=2;case 2:return[2]}})})};this.videoOnWaitingEvent=function(){b.playbackState=I.BUFFERING;b.eventHandler.onVideoBufferingStarted(b.getCurrentTimeMs(),b.getPercentDownloaded(),b.getDroppedFrames())};this.videoOnTimeUpdateEvent=function(){var m=b.getCurrentTimeMs(),p=b.getContinuousPlaybackDurationMs();b.continuousDurationBoundaryChecks.forEach(function(t){t.reportIfBoundaryCrossed(p)});b.boundaryChecks.forEach(function(t){t.reportIfBoundaryCrossed(b.lastOnTimeUpdateCurrentTimeMs,
m,b.getDurationMs(),b.getPercentDownloaded(),b.getDroppedFrames())});b.lastOnTimeUpdateCurrentTimeMs=m;var u=Oa.getPercentInView(b.videoElement);b.eventHandler.onVideoTimeUpdated(m,b.getDurationMs(),p,u)};this.videoOnAbortEvent=function(){b.stopVideoLoadingAnimation();b.eventHandler.onVideoAborted(b.getCurrentTimeMs())};this.handleFirstFramePlayedEvent=function(){if(!b.firstFramePlayed){var m=b.getDateTime()-b.initiatedPlayTime;b.eventHandler.onTimeToFirstFrame(m,b.getPercentDownloaded(),b.getDroppedFrames());
b.firstFramePlayed=!0;b.clientInitiatedStartTime&&(m=b.getDateTime()-b.clientInitiatedStartTime,b.eventHandler.onClientLoadToFirstFrame(m,b.getPercentDownloaded(),b.getDroppedFrames()),b.firstFramePlayed=!0)}};this.handleVideoPlaybackFailureEvent=function(){if(b.videoElement.error){var m=b.translateVideoErrorCode(b.videoElement.error.code);b.eventHandler.onVideoPlaybackFailure(b.getCurrentTimeMs(),m,b.videoElement.error.message)}};this.translateVideoErrorCode=function(m){switch(m){case 1:return"MEDIA_ERR_ABORTED";
case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"UNKNOWN"}};this.accrueContinuousPlaybackDuration=function(m){b.continuousDurationAccruedPlayTimeMs+=m-b.continuousDurationStartTimeMs;b.continuousDurationStartTimeMs=0};this.videoElement=c;this.eventHandler=f;this.lastOnTimeUpdateCurrentTimeMs=this.continuousDurationAccruedPlayTimeMs=this.continuousDurationStartTimeMs=0;this.boundaryChecks=h;this.continuousDurationBoundaryChecks=
e;this.playbackState=I.INITIATED;this.loadStartTime=this.getDateTime();this.assetLoaded=!1;this.retryLoadCount=0;this.firstFramePlayed=!1;this.isVideoLoadingAnimationVisible=!0;this.videoContainer=a;this.clientInitiatedStartTime=d;this.videoElement.oncanplay=this.videoOnCanPlayEvent;this.videoElement.onerror=this.videoOnErrorEvent;this.videoElement.onplaying=this.videoOnPlayingEvent;this.videoElement.onpause=this.videoOnPauseEvent;this.videoElement.onended=this.videoOnEndedEvent;this.videoElement.onwaiting=
this.videoOnWaitingEvent;this.videoElement.ontimeupdate=this.videoOnTimeUpdateEvent;this.videoElement.onabort=this.videoOnAbortEvent;4===this.videoElement.readyState&&(this.eventHandler.onVideoReadyForPlayback(0,0,this.getPercentDownloaded(),this.getDurationMs()),this.assetLoaded=!0,this.stopVideoLoadingAnimation());if(this.videoElement.error&&this.videoElement.error.code)this.videoElement.onerror("TriggeredBeforeInit");c=this.videoElement.dataset.poster;this.videoElement.poster!==c&&(this.videoElement.poster=
c);var l=null===(g=this.videoElement.textTracks)||void 0===g?void 0:g[0];this.ccText=a.querySelector('[data-type="ccText"]');a="true"===this.videoElement.dataset.isVerticalVideo;l&&this.ccText&&(l.mode="hidden",a?null===(k=this.videoElement.querySelector("track"))||void 0===k?void 0:k.addEventListener("load",function(){var m=b.generateNewTextTrack(l);m&&m.addEventListener("cuechange",function(){var p=m.activeCues;p&&0<p.length&&(this.ccText.innerHTML=p[0].text)}.bind(b))}):l.addEventListener("cuechange",
function(){var m=l.activeCues;m&&0<m.length&&(this.ccText.innerHTML=m[0].text)}.bind(this)))}}(),da=function(){function c(){}c.registeredElements=[];c.attachedToViewWillDisappear=!1;c.registerElement=function(f,h,e,a,d,b,g,k){f={callback:b,dispatchOnElementInView:e,dispatchOnElementOutOfView:a,element:f,isInView:void 0,ratioInView:h,recurring:d,eventData:g,options:k};0===c.registeredElements.length&&c.attachListeners();c.registeredElements.push(f);c.handleViewChange(f)};c.deregisterElement=function(f,
h,e,a,d){c.registeredElements=c.registeredElements.filter(function(b){return!(b.element===f&&b.ratioInView===h&&b.dispatchOnElementInView===e&&b.dispatchOnElementOutOfView===a&&b.recurring===d)});0===c.registeredElements.length&&c.detachListeners()};c.emitViewabilityChange=function(f,h){f.isInView=h;f.callback(f.ratioInView,h,f.eventData);f.recurring||c.deregisterElement(f.element,f.ratioInView,f.dispatchOnElementInView,f.dispatchOnElementOutOfView,f.recurring)};c.handleRatioInViewChange=function(f,
h){f.dispatchOnElementInView&&h>=f.ratioInView&&!f.isInView&&c.emitViewabilityChange(f,!0);f.dispatchOnElementOutOfView&&h<f.ratioInView&&f.isInView&&c.emitViewabilityChange(f,!1)};c.handleBrowserHidden=function(f){c.handleRatioInViewChange(f,0)};c.handleViewChange=function(f){c.handleRatioInViewChange(f,Oa.getPercentInView(f.element,f.options))};c.onBrowserHidden=function(){c.registeredElements.forEach(c.handleBrowserHidden)};c.onBrowserShown=function(){c.registeredElements.forEach(c.handleViewChange)};
c.onBrowserVisibilityChange=function(){var f=L().hidden;if(f)c.onBrowserHidden();else setTimeout(c.onBrowserShown,50);c.registeredElements.forEach(function(h){var e,a;null===(a=null===(e=h.options)||void 0===e?void 0:e.onBrowserVisibilityChange)||void 0===a?void 0:a.call(e,!f)})};c.toggleBrowserVisibility=function(){c.onBrowserHidden();c.onBrowserShown()};c.attachListeners=function(){c.throttledOnBrowserViewChange||(c.throttledOnBrowserViewChange=y["default"].throttle(function(){c.registeredElements.forEach(c.handleViewChange)},
50));y["default"].on("afterReady",c.throttledOnBrowserViewChange);y["default"].on(y["default"].constants.BROWSER_EVENTS.SCROLL,c.throttledOnBrowserViewChange);y["default"].on(y["default"].constants.BROWSER_EVENTS.RESIZE,c.throttledOnBrowserViewChange);y["default"].on(y["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,c.throttledOnBrowserViewChange);var f=L().defaultView;E.addEventListener(f,"beforeunload",1,c.onBrowserHidden);E.addEventListener(L(),"visibilitychange",1,c.onBrowserVisibilityChange);
Y.isWebView()||(E.addEventListener(f,"focus",1,c.onBrowserShown),E.addEventListener(f,"blur",1,c.onBrowserHidden));Y.isSafari()&&!Y.isWebView()&&(E.addEventListener(f,"pagehide",1,c.onBrowserHidden),E.addEventListener(f,"pageshow",1,c.onBrowserShown),E.addEventListener(f,"popstate",1,c.toggleBrowserVisibility));c.attachToViewWillDisappear()};c.detachListeners=function(){y["default"].off("afterReady",c.throttledOnBrowserViewChange);y["default"].off(y["default"].constants.BROWSER_EVENTS.SCROLL,c.throttledOnBrowserViewChange);
y["default"].off(y["default"].constants.BROWSER_EVENTS.RESIZE,c.throttledOnBrowserViewChange);y["default"].off(y["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,c.throttledOnBrowserViewChange);var f=L().defaultView;E.removeEventListener(L(),"visibilitychange",1,c.onBrowserVisibilityChange);E.removeEventListener(f,"beforeunload",1,c.onBrowserHidden);Y.isWebView()||(E.removeEventListener(f,"focus",1,c.onBrowserShown),E.removeEventListener(f,"blur",1,c.onBrowserHidden));Y.isSafari()&&!Y.isWebView()&&
(E.removeEventListener(f,"pagehide",1,c.onBrowserHidden),E.removeEventListener(f,"pageshow",1,c.onBrowserShown),E.removeEventListener(f,"popstate",1,c.toggleBrowserVisibility))};c.attachToViewWillDisappear=function(){if(!c.attachedToViewWillDisappear){var f=L().defaultView;c.attachedToViewWillDisappear=!0;f.app||(f.app={});c.previousViewWillDisappear=f.app.willDisappear;f.app.willDisappear=function(){c.onBrowserHidden();c.previousViewWillDisappear&&c.previousViewWillDisappear()}}};return c}(),Pa;
(function(c){c.PORTRAIT="PORTRAIT";c.LANDSCAPE="LANDSCAPE";c.SQUARE="SQUARE"})(Pa||(Pa={}));var yb=function(){return function(c,f,h,e,a,d){var b=this;void 0===e&&(e={});void 0===a&&(a=!1);void 0===d&&(d=!1);this.init=function(){var g,k,l=b.videoOptions,m=l.shouldEnablePlayButton,p=l.shouldEnablePauseButton,u=void 0===p?!0:p;p=l.shouldEnableReduceMotionEffects;var t=l.isAdBlockerEnabled;t=void 0===t?!1:t;var v=l.clientInitiatedStartTime;l=b.element.querySelector("video");var z=b.buildBoundaryListeners(),
B="true"===(null===l||void 0===l?void 0:l.getAttribute("data-videoloadedusinginlinescript"))?!0:!1;b.videoPlayer=new pd(l,b.videoEventHandler,z,[],b.element,v);b.shouldDelayLoadingVideos||B||b.videoPlayer.load();b.element.querySelectorAll("a").forEach(function(G){G.addEventListener("click",b.logClick)});b.muteClickRegion=b.element.querySelector('[data-type="audioToggleContainer"]');b.muteClickRegion&&(b.muteButton=b.muteClickRegion.querySelector('[data-type="audioToggleMute"]'),b.unmuteButton=b.muteClickRegion.querySelector('[data-type="audioToggleUnmute"]'),
b.setMuteButtonStatus(b.videoPlayer.isMuted()),b.muteClickRegion.addEventListener("click",b.toggleAudio),b.isMuted=b.videoPlayer.isMuted());b.ccTrackFail=!1;b.ccTrack=b.element.querySelector('[data-type="ccTrack"]');b.ccTrack&&(b.ccTrack.onerror=b.ccLoadFailure);b.ccContainer=b.element.querySelector('[data-type="ccContainer"]');b.ccClickRegion=b.element.querySelector('[data-type="ccToggleContainer"]');b.ccClickRegion&&(b.ccButtonOff=b.ccClickRegion.querySelector('[data-type="ccToggleOff"]'),b.ccButtonOn=
b.ccClickRegion.querySelector('[data-type="ccToggleOn"]'),b.ccClickRegion.addEventListener("click",function(){return b.toggleCC()}),b.toggleCC(!1,wa.DEFAULT_OFF));b.playClickRegion=b.element.querySelector('[data-type="playIcon"]');b.playButton=null!==(k=null===(g=b.playClickRegion)||void 0===g?void 0:g.querySelector("button"))&&void 0!==k?k:null;u&&(b.videoOptions.shouldEnablePlayButton=!0,b.setUpPlayButtonEvents(),b.pauseClickRegion=b.element.querySelector('[data-type="pauseIcon"]'),b.setUpPauseButtonEvents());
g=Tc("(prefers-reduced-motion: reduce)");g=p&&!(null===g||void 0===g||!g.matches);if(t)b.videoEventHandler.onAdblockDetected();b.isAutoPlayDisabled=g||t;b.isAutoPlayDisabled&&(m=!0,b.setUpPlayButtonEvents(),b.videoEventHandler.onVideoPausedDueToAutoplayDisabled());b.showPlayButton(m);b.handleVideoOrientation();b.skipViewabilityRegistration||(da.registerElement(l,.5,!0,!0,!0,b.onFiftyPercentViewabilityChange),da.registerElement(l,.01,!0,!0,!0,b.onOnePercentViewabilityChange,void 0,{onBrowserVisibilityChange:b.onBrowserVisibilityChange}))};
this.getVideoCurrentTimeMs=function(){return b.videoPlayer.getCurrentTimeMs()};this.getTotalVideoDuration=function(){return b.videoPlayer.getDurationMs()};this.loadVideo=function(){b.videoPlayer.load()};this.setMuteStatus=function(g,k){b.isMuted=g;b.setMuteButtonStatus(g);b.muteClickRegion&&(g?(b.videoPlayer.mute(),b.videoEventHandler.onVideoMuted(b.getVideoCurrentTimeMs(),k)):(b.videoPlayer.unmute(),b.videoEventHandler.onVideoUnmuted(b.getVideoCurrentTimeMs(),k)))};this.play=function(){if(b.isPlaying())return Promise.resolve();
b.videoPlayer.hasSrcAttr()||b.videoPlayer.loadVideoOnBrowserVisible();b.videoPlayer.resetContinuousPlaybackDurationMs();b.videoEventHandler.onVideoPlaybackInitiated(b.getVideoCurrentTimeMs());b.showPlayButton(!1);b.showPauseButton(!0);b.muteClickRegion&&(b.muteClickRegion.style.display="block",b.videoEventHandler.onAudioToggleIconDisplayed(),b.muteClickRegion.style.visibility="visible");b.pauseClickRegion&&(b.pauseClickRegion.style.display="block",b.videoEventHandler.onPauseIconDisplayed(),b.pauseClickRegion.style.visibility=
"visible");b.ccTrack&&(b.ccTrack.onerror=b.ccLoadFailure,b.ccTrackFail?b.ccLoadFailure():b.ccClickRegion&&(b.ccClickRegion.style.display="block",b.videoEventHandler.onCcIconDisplayed(),b.ccClickRegion.style.visibility="visible"));return b.videoPlayer.play(Date.now()).then().catch(function(g){var k="string"===typeof g?g:"";g instanceof DOMException&&(k=g.name+": "+g.message);b.showPlayButton(!0);b.muteClickRegion&&(b.muteClickRegion.style.visibility="hidden");b.ccClickRegion&&(b.ccClickRegion.style.visibility=
"hidden");if(k.startsWith("NotSupported"))b.videoEventHandler.onVideoPlayPromiseNotSupported();b.videoEventHandler.onVideoPlayPromiseRejected(k)})};this.pause=function(g){b.isPaused()||(b.videoEventHandler.onVideoPauseInitiated(b.getVideoCurrentTimeMs()),b.videoEventHandler.onVideoViewed(b.videoPlayer.getContinuousPlaybackDurationMs()),b.videoPlayer.resetContinuousPlaybackDurationMs(),b.showPauseButton(!1),!g&&b.videoOptions.shouldEnablePlayButton&&b.showPlayButton(!0),b.muteClickRegion&&(b.muteClickRegion.style.visibility=
"hidden"),b.videoPlayer.pause())};this.onBrowserVisibilityChange=function(g){b.videoOptions.shouldEnableVideoCleanup&&(g?b.videoPlayer.loadVideoOnBrowserVisible():b.videoPlayer.clear())};this.onOnePercentViewabilityChange=function(g,k){g=Date.now();k?(b.onScreenStartTime=g,b.videoEventHandler.onVideoOnScreen(b.videoPlayer.getPercentDownloaded())):(b.videoPlayer.isMuted()||b.setMuteStatus(!0,V.VIDEO_OFF_SCREEN),b.videoEventHandler.onVideoOffScreen(g-b.onScreenStartTime,b.getVideoCurrentTimeMs()),b.onScreenStartTime=
0,b.videoPlayer.seekToStart(),b.videoPlayer.resetContinuousPlaybackDurationMs())};this.onFiftyPercentViewabilityChange=function(g,k,l){b.isAutoPlayDisabled&&!b.playButtonClicked||b.pauseButtonClicked||(k?b.play().catch():b.pause(l))};this.setVideoOptions=function(g){b.videoOptions=g};this.setAutoPlayDisabled=function(g){b.isAutoPlayDisabled=g};this.handleVideoOrientation=function(){var g=b.videoAdAttributes,k=g.videoPreviewImageSrc;if(g=g.videoOrientation===Pa.PORTRAIT)void 0===k&&(k=""),g=!k.startsWith("https://m.media-amazon.com");
if(g)b.videoEventHandler.onVideoPreviewImageNotMediaAmazon()};this.isPlaying=function(){return b.videoPlayer.playbackState===I.PLAYING};this.isPaused=function(){return b.videoPlayer.playbackState===I.PAUSED};this.buildBoundaryListeners=function(){return[new xb(2E3,b.videoEventHandler.onVideoDurationPlayed),new xb(15E3,b.videoEventHandler.onVideoDurationPlayed)]};this.toggleAudio=function(){var g,k,l="true"===(null===(g=b.muteClickRegion)||void 0===g?void 0:g.getAttribute("aria-pressed"));null===(k=
b.muteClickRegion)||void 0===k?void 0:k.setAttribute("aria-pressed",!l+"");b.setMuteStatus(!b.videoPlayer.isMuted(),V.ICON_TAP)};this.toggleCC=function(g,k){var l;b.ccShowing=null!==g&&void 0!==g?g:!b.ccShowing;g=null!==k&&void 0!==k?k:wa.ICON_TAP;b.ccButtonOff&&b.ccButtonOn&&(b.ccShowing?(b.videoEventHandler.onCcOn(g,b.videoPlayer.getCaptionLang()),b.ccButtonOn.style.opacity="1",b.ccButtonOff.style.opacity="0"):(b.videoEventHandler.onCcOff(g,b.videoPlayer.getCaptionLang()),b.ccButtonOn.style.opacity=
"0",b.ccButtonOff.style.opacity="1"));b.ccContainer&&(b.ccContainer.style.visibility=b.ccShowing?"visible":"hidden");null===(l=b.ccClickRegion)||void 0===l?void 0:l.setAttribute("aria-pressed",""+b.ccShowing)};this.showPlayButton=function(g){b.playClickRegion&&(b.playClickRegion.style.visibility=g?"inherit":"hidden")};this.showPauseButton=function(g){if(b.pauseClickRegion&&(b.pauseClickRegion.style.visibility=g?"inherit":"hidden",g))b.videoEventHandler.onPauseIconDisplayed()};this.setUpPlayButtonEvents=
function(){b.playClickRegion&&b.playClickRegion.addEventListener("click",function(){var g;b.play();b.playButtonClicked=!0;if(b.playButtonClicked&&b.pauseButtonClicked)b.videoEventHandler.onVideoPlayFromPause(b.getVideoCurrentTimeMs());b.pauseButtonClicked=!1;null===(g=b.pauseClickRegion)||void 0===g?void 0:g.focus()})};this.setUpPauseButtonEvents=function(){b.pauseClickRegion&&b.pauseClickRegion.addEventListener("click",function(){var g;b.pause();b.pauseButtonClicked=!0;b.videoEventHandler.onVideoPauseButtonTriggered(b.getVideoCurrentTimeMs());
b.playButtonClicked=!1;null===(g=b.playButton)||void 0===g?void 0:g.focus()})};this.ccLoadFailure=function(){b.ccTrackFail=!0;b.videoEventHandler.onCcLoadFailure();b.ccClickRegion&&(b.ccClickRegion.style.visibility="hidden")};this.setMuteButtonStatus=function(g){b.muteButton&&b.unmuteButton&&(g?(b.unmuteButton.style.fillOpacity="0",b.muteButton.style.fillOpacity="1"):(b.muteButton.style.fillOpacity="0",b.unmuteButton.style.fillOpacity="1"))};this.logClick=function(){b.videoEventHandler.onVideoClicked(b.getVideoCurrentTimeMs())};
this.element=c;this.videoAdAttributes=h;this.videoEventHandler=f;this.videoOptions=e;this.skipViewabilityRegistration=a;this.shouldDelayLoadingVideos=d}}(),qd=function(c){return 9<c?String(c):"0"+c},zb=function(c){if(0>=c)return"00:00";var f=Math.floor(c/36E5);c=[Math.floor(c/6E4%60),Math.floor(c/1E3%60)];0<f&&c.unshift(f);return c.map(qd).join(":")},rd=function(){function c(f){this.timerElement=f;this.msToEvent=parseInt(f.dataset.targetTime,10);this.timerElement.innerText=zb(this.msToEvent)}c.prototype.start=
function(){var f=this;isNaN(this.msToEvent)||(this.counterStartTime=Date.now(),this.counterInterval=Gc.interval(function(){return f.updateTime()},500))};c.prototype.updateTime=function(){var f=Date.now()-this.counterStartTime;0>=this.msToEvent-f&&clearInterval(this.counterInterval);this.timerElement.innerText=zb(this.msToEvent-f)};return c}(),Ab=function(c){null===c?ha["default"].log("No element found to initialize badge timer. returning..."):Array.prototype.slice.call(c.getElementsByClassName("badge-countdown-timer")).forEach(function(f){0===
(null===f||void 0===f?void 0:f.innerHTML.length)&&(new rd(f)).start()})},Bb=function(){return function(c,f,h){var e=this;this.onBackgroundClicked=function(){e.metricsManager.reportBackgroundClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onCtaClicked=function(){e.metricsManager.reportBrandCtaLinkClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onCtaBannerClicked=function(){e.metricsManager.reportCtaBannerClicked(e.videoManager.getVideoCurrentTimeMs(),
e.videoManager.videoAdAttributes)};this.onHeadlineClicked=function(){e.metricsManager.reportHeadlineClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onBrandCtaLinkClicked=function(){e.metricsManager.reportBrandCtaLinkClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onBrandLogoClicked=function(){e.metricsManager.reportBrandLogoClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onBrandNameClicked=
function(){e.metricsManager.reportBrandNameClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onCreatorLogoClicked=function(){e.metricsManager.reportCreatorLogoClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onCreatorCtaClicked=function(){e.metricsManager.reportCreatorCtaClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.productReceived=function(a){var d;void 0===a&&(a=0);var b=(null===(d=
e.widgetEventAttributes)||void 0===d?0:d.productAttributes)&&0<e.widgetEventAttributes.productAttributes.length?e.widgetEventAttributes.productAttributes[a]:void 0;e.metricsManager.reportProductReceived(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes,b)};this.onProductClicked=function(a){var d;void 0===a&&(a=0);var b=(null===(d=e.widgetEventAttributes)||void 0===d?0:d.productAttributes)&&0<e.widgetEventAttributes.productAttributes.length?e.widgetEventAttributes.productAttributes[a]:
void 0;e.metricsManager.reportProductClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes,b)};this.eventBannerDisplayed=function(a){e.metricsManager.reportEventBannerDisplayed(a,e.videoManager.videoAdAttributes)};this.onEventBannerClicked=function(a){e.metricsManager.reportEventBannerClicked(a,e.videoManager.videoAdAttributes)};this.metricsManager=c;this.videoManager=f;this.widgetEventAttributes=h}}(),Cb=function(){function c(f,h){var e=this;this.setupBackgroundEvent=function(){e.widgetElements.backgroundElement&&
e.widgetElements.backgroundElement.addEventListener("click",e.widgetEventHandler.onBackgroundClicked)};this.setupBrandLogoEvent=function(){e.widgetElements.brandLogoElement&&e.widgetElements.brandLogoElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",e.widgetEventHandler.onBrandLogoClicked)});e.widgetElements.brandElement&&e.widgetElements.brandElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",e.widgetEventHandler.onBrandCtaLinkClicked)})};this.setupCallToActionEvent=
function(){e.widgetElements.callToActionElement&&e.widgetElements.callToActionElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",e.widgetEventHandler.onCtaClicked)});e.widgetElements.callToActionBannerElement&&e.widgetElements.callToActionBannerElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",e.widgetEventHandler.onCtaBannerClicked)})};this.setupHeadlineEvent=function(){e.widgetElements.headlineElement&&e.widgetElements.headlineElement.querySelectorAll("*").forEach(function(a){a.addEventListener("click",
e.widgetEventHandler.onHeadlineClicked)})};this.setupProductEvents=function(){e.widgetElements.productElements&&e.widgetElements.productElements.forEach(function(a,d){a&&(e.widgetEventHandler.productReceived(d),a.querySelectorAll("a").forEach(function(b){b.addEventListener("click",function(){e.widgetEventHandler.onProductClicked(d)})}))})};this.setUpCreatorContentEvents=function(){e.setupBrandNameEvent();e.setupCreatorCtaEvent();e.setupCreatorLogoEvent()};this.setupBrandNameEvent=function(){e.widgetElements.brandNameElement&&
e.widgetElements.brandNameElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",e.widgetEventHandler.onBrandNameClicked)})};this.setupCreatorCtaEvent=function(){e.widgetElements.creatorNameElement&&e.widgetElements.creatorNameElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",e.widgetEventHandler.onCreatorCtaClicked)})};this.setupCreatorLogoEvent=function(){e.widgetElements.creatorLogoElement&&e.widgetElements.creatorLogoElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",
e.widgetEventHandler.onCreatorLogoClicked)})};this.setupEventBannerEvents=function(){var a=w["default"].cardRoot.querySelector('[data-type="eventBannerContainer"]');if(a&&a.dataset){var d=a.dataset.layout,b=void 0===d?"":d;e.widgetEventHandler.eventBannerDisplayed(b);a.querySelectorAll("a").forEach(function(g){g.addEventListener("click",function(){return e.widgetEventHandler.onEventBannerClicked(b)})})}};this.widgetElements=f;this.widgetEventHandler=h}c.prototype.setupWidgetEvents=function(){this.setupBackgroundEvent();
this.setupBrandLogoEvent();this.setupCallToActionEvent();this.setupHeadlineEvent();this.setupProductEvents();this.setupEventBannerEvents();this.setUpCreatorContentEvents()};return c}(),ya;(function(c){c.DESKTOP="Desktop";c.MOBILE="Mobile"})(ya||(ya={}));var za,Qa,Aa,Ba,Ca,Ra,Da,Ea,Sa,M={SBV_468340:"SBV_468340",SBV_672322:"SBV_672322",SBV_708584:"SBV_708584",SBV_834356:"SBV_834356",SBV_836067:"SBV_836067",SBV_842986:"SBV_842986",ADPT_SBV_1041956:"ADPT_SBV_1041956",ADPT_SCF_1166012:"ADPT_SCF_1166012",
ADPT_SCF_1172625:"ADPT_SCF_1172625"},Db=n.__assign(n.__assign({},M),{SBV_776653:"SBV_776653",SBV_814590:"SBV_814590",ADPT_SBV_956803:"ADPT_SBV_956803"}),Eb=n.__assign(n.__assign({},Db),{MBV_394048:"MBV_394048",SBV_414150:"SBV_414150",SBV_427616:"SBV_427616",ADPT_SBV_959560:"ADPT_SBV_959560",SBV_620753:"SBV_620753",SBV_642751:"SBV_642751",SBV_656845:"SBV_656845",SBV_668132:"SBV_668132"}),Fb=n.__assign(n.__assign({},Db),{MBV_394383:"MBV_394383",SBV_414153:"SBV_414153",SBV_427647:"SBV_427647",ADPT_SBV_959572:"ADPT_SBV_959572",
ADPT_SBV_983988:"ADPT_SBV_983988",SBV_642769:"SBV_642769",SBV_656827:"SBV_656827",SBV_668135:"SBV_668135",SBV_677302:"SBV_677302",SBV_682273:"SBV_682273",ADPT_SBV_992627:"ADPT_SBV_992627"}),Gb=n.__assign(n.__assign({},M),{SBV_649291:"SBV_649291",ADPT_SBV_956803:"ADPT_SBV_956803"}),Hb=n.__assign({},M),Ib=n.__assign(n.__assign({},M),{SB_DP_THEMATIC_HRB_VIDEO_MOBILE_598714:"SB_DP_THEMATIC_HRB_VIDEO_MOBILE_598714"}),Jb=n.__assign(n.__assign({},M),{SBV_576903:"SBV_576903",SBV_576904:"SBV_576904"}),Kb=
n.__assign(n.__assign({},M),{SBV_576917:"SBV_576917",SBV_576918:"SBV_576918"}),Lb=n.__assign(n.__assign({},M),{SBV_485007:"SBV_485007",SB_VIDEO_CONTENT_DEDUPE_454175:"SB_VIDEO_CONTENT_DEDUPE_454175",SBV_737682:"SBV_737682",ADPT_SBV_1163064:"ADPT_SBV_1163064"}),Mb=n.__assign(n.__assign({},Lb),{SBV_793878:"SBV_793878"}),Nb=n.__assign(n.__assign({},Lb),{ADPT_SBV_SEARCH_1021874:"ADPT_SBV_SEARCH_1021874"}),Ta=n.__assign(n.__assign({},M),{SBV_485007:"SBV_485007",SBV_635550:"SBV_635550",SB_VIDEO_CONTENT_DEDUPE_454175:"SB_VIDEO_CONTENT_DEDUPE_454175",
SBV_716513:"SBV_716513",SBV_737682:"SBV_737682",ADPT_SBV_1163064:"ADPT_SBV_1163064"}),sd=n.__assign({},Ta),td=n.__assign(n.__assign({},M),{ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1115870:"ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1115870",ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1131604:"ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1131604",SEARCH_WWGS_NON_ENDEMIC_GROCERY_ADS_1107266:"SEARCH_WWGS_NON_ENDEMIC_GROCERY_ADS_1107266",
ADPT_SBV_1163064:"ADPT_SBV_1163064"}),Ob=n.__assign(n.__assign({},M),{SBV_716513:"SBV_716513",SBV_737682:"SBV_737682",ADPT_SEARCH_824668:"ADPT_SEARCH_824668",SEARCH_758318:"SEARCH_758318",SBV_798693:"SBV_798693",SBV_798694:"SBV_798694",SBV_798704:"SBV_798704",ADPT_SBV_956803:"ADPT_SBV_956803",ADPT_SEARCH_INLINE_SBV_DEALS_1101720:"ADPT_SEARCH_INLINE_SBV_DEALS_1101720",ADPT_SEARCH_BOTTOM_SBV_DEALS_1101718:"ADPT_SEARCH_BOTTOM_SBV_DEALS_1101718",ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1115870:"ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1115870",
ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1131604:"ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1131604",SEARCH_WWGS_NON_ENDEMIC_GROCERY_ADS_1107266:"SEARCH_WWGS_NON_ENDEMIC_GROCERY_ADS_1107266",ADPT_SBV_1163064:"ADPT_SBV_1163064",ADPT_SEARCH_AF_CLIENT_EVENT_1191679:"ADPT_SEARCH_AF_CLIENT_EVENT_1191679",ADPT_SEARCH_SB_CONFIGURABLE_CARD_MOBILE_1164394:"ADPT_SEARCH_SB_CONFIGURABLE_CARD_MOBILE_1164394"}),Pb=n.__assign(n.__assign(n.__assign({},M),Ob),{SEARCH_1032744:"SEARCH_1032744",
ADPT_SBV_SEARCH_948552:"ADPT_SBV_SEARCH_948552",ADPT_SBV_890511:"ADPT_SBV_890511",ADPT_SBV_990170:"ADPT_SBV_990170",ADPT_SBV_1021793:"ADPT_SBV_1021793",ADPT_SBV_SEARCH_1038654:"ADPT_SBV_SEARCH_1038654",ADPT_SBV_SEARCH_SPRINGSALE25_DEALS_DESKTOP_1191743:"ADPT_SBV_SEARCH_SPRINGSALE25_DEALS_DESKTOP_1191743"}),Qb=n.__assign(n.__assign(n.__assign({},M),Ob),{SEARCH_786608:"SEARCH_786608",SEARCH_1032743:"SEARCH_1032743",ADPT_SBV_877926:"ADPT_SBV_877926",ADPT_SBV_SEARCH_954307:"ADPT_SBV_SEARCH_954307",ADPT_SBV_1001786:"ADPT_SBV_1001786",
ADPT_SBV_SEARCH_1038651:"ADPT_SBV_SEARCH_1038651",ADPT_SBV_SEARCH_1038653:"ADPT_SBV_SEARCH_1038653",ADPT_SB_SEARCH_STORE_DEALS_INGRESS_SBV_SPARKLE_P2_1183604:"ADPT_SB_SEARCH_STORE_DEALS_INGRESS_SBV_SPARKLE_P2_1183604",ADPT_SBV_SEARCH_SPRINGSALE25_DEALS_MOBILE_1191741:"ADPT_SBV_SEARCH_SPRINGSALE25_DEALS_MOBILE_1191741",ADPT_SBV_SEARCH_SPRINGSALE25_DEALS_MOBILE_P2PLUS_1195474:"ADPT_SBV_SEARCH_SPRINGSALE25_DEALS_MOBILE_P2PLUS_1195474"}),Rb=n.__assign(n.__assign(n.__assign({},M),td),{ADPT_SEARCH_SB_CONFIGURABLE_CARD_MOBILE_1164394:"ADPT_SEARCH_SB_CONFIGURABLE_CARD_MOBILE_1164394"}),
ud=n.__assign({},M),J=n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign({},Eb),Fb),Jb),Kb),Mb),Nb),Ta),Pb),Qb),Gb),Hb),Ib),Rb),ka=ya.DESKTOP,Z=ya.MOBILE,vd=N.MULTI_BRAND_VIDEO,wd=N.SHORT_FORM_VIDEO,xd=N.THEMATIC_VIDEO,yd=N.VIDEO_SINGLE_BRAND,zd=N.VIDEO_PRODUCT_COLLECTION,Ad=N.VIDEO_SPLIT,Bd=N.VIDEO_STORE,Cd=N.VIDEO_STORE_PRODUCT_FEATURE,Dd=N.CONFIGURABLE;var X={};X[vd]=(za={},za[ka]=Eb,za[Z]=Fb,za);X[wd]=
(Qa={},Qa[Z]=Gb,Qa);X[xd]=(Aa={},Aa[ka]=Hb,Aa[Z]=Ib,Aa);X[yd]=(Ba={},Ba[ka]=Jb,Ba[Z]=Kb,Ba);X[zd]=(Ca={},Ca[ka]=Pb,Ca[Z]=Qb,Ca);X[Ad]=(Ra={},Ra[Z]=ud,Ra);X[Bd]=(Da={},Da[ka]=Mb,Da[Z]=Nb,Da);X[Cd]=(Ea={},Ea[ka]=Ta,Ea[Z]=sd,Ea);X[Dd]=(Sa={},Sa[Z]=Rb,Sa);X;var C;(function(c){c.C="C";c.T1="T1";c.T2="T2";c.T3="T3";c.T4="T4";c.T5="T5";c.T6="T6";c.T7="T7"})(C||(C={}));var Sb=function(c){return Y.isIOSWebView()&&c.getTreatment(J.SBV_834356)===C.T1||c.getTreatment(J.SBV_836067)===C.T1},Tb={shouldAreaOnlyUseElementWidth:!0},
Ub=function(){return function(c){var f=this;this.attach=function(){f.setupAdUnitViewability()};this.setupAdUnitViewability=function(){da.registerElement(f.adUnitElement,.5,!0,!0,!0,f.onFiftyPercentViewabilityChange,void 0,Tb)};this.onFiftyPercentViewabilityChange=function(h,e){f.adUnitInView=e};this.isAdUnitInView=function(){return f.adUnitInView};this.calculateVideoDurationTotalMsRelativeToAdUnit=function(h){f.isAdUnitInView()?f.videoDurationTotalMsWhenAdInViewFirst=h-f.videoDurationStartTimeMsWhenAdInViewFirst:
(f.videoDurationTotalMsWhenAdInViewFirst=0,f.videoDurationStartTimeMsWhenAdInViewFirst=h);return f.videoDurationTotalMsWhenAdInViewFirst};this.getAdUnitPercentInView=function(){return Oa.getPercentInView(f.adUnitElement,Tb)};this.adUnitElement=c;this.adUnitInView=!1;this.videoDurationTotalMsWhenAdInViewFirst=this.videoDurationStartTimeMsWhenAdInViewFirst=0}}(),ta,Ed=sa.BrandVideoProduct,Fd=sa.BrandVideoStore,Gd=sa.ProductWithTintedCta,Vb=(ta={},ta[Ed]={brand:!0,product:!0,store:!1},ta[Gd]={brand:!1,
product:!0,store:!1},ta[Fd]={brand:!0,product:!1,store:!0},ta),mc=function(){function c(f,h){var e=this;this.isALink=!1;this.videoManagers=[];this.videoPlayersStatus=[];this.impFired=[];this.mediaSourceSwapCompleted=[];this.getDynamicMetricAttributes=function(){var a;return a={},a[q.CAROUSEL_PAGE_NUMBER]=e.currentCarouselPage,a};this.updateMediaAssetSources=function(a,d){var b=e.controllerOptions.shouldDelayMediaLoading;a&&b&&!e.mediaSourceSwapCompleted[d]&&(b=JSON.parse(a.dataset.videoAdAttributesProps),
0<d&&e.videoManagers[d].loadVideo(),e.updatePreviewImageSource(a,b),e.updateProductImageSource(a,b),e.mediaSourceSwapCompleted[d]=!0)};this.updateProductImageSource=function(a,d){var b,g=d.videoAdType;g=(null!==(b=Vb[void 0===g?"":g])&&void 0!==b?b:{}).product;if(void 0===g?0:g)d=d.imageUrl,void 0===d&&(d=""),a&&d&&(a=a.querySelector('[data-type="productImage"]'))&&a.getAttribute("src")!==d&&a.setAttribute("src",d)};this.updatePreviewImageSource=function(a,d){d=d.videoPreviewImageSrc;var b;if(a){var g=
a.querySelector("video");if(g){var k=g.getAttribute("poster");k&&k!==d&&(g.setAttribute("poster",d),a=a.querySelector('[data-show-background-image="true"]'),d=null===(b=null===a||void 0===a?void 0:a.getAttribute)||void 0===b?void 0:b.call(a,"data-background-image-url"),(null===a||void 0===a?0:a.style)&&d&&(a.style.backgroundImage="url('"+d+"')"))}}};this.carouselItemsPerPage=function(){var a=e.controllerOptions.minimumGutterWidth;a=void 0===a?0:a;var d=e.carouselViewport.getBoundingClientRect().width,
b=w["default"].cardRoot.getElementsByClassName("a-carousel-card")[0].getBoundingClientRect().width;return Math.floor(d/(b+a))};this.logImpression=function(a,d){if(!e.impFired[d]&&(a=a.querySelector('[data-type="ip"]'))){var b=a.getAttribute("data-src");b&&(a.setAttribute("src",b),e.impFired[d]=!0)}};this.pauseVideo=function(a){e.videoManagers[a].pause()};this.playVideo=function(a){e.enableAutoPlayForAllVideos();e.videoManagers[a].play().then(function(){e.currentPlayingIndex=a}).catch()};this.setupPlayButtonEventHandlers=
function(a,d,b){(a=a.querySelector('[data-type="playIcon"]'))&&a.addEventListener("click",function(g){return e.onPlayBtnEventTriggered(g,d,b)})};this.updateClientMetricsContext=function(){e.metricsManager.setClientMetricsContext({getDynamicMetricsAttributes:e.getDynamicMetricAttributes})};this.setupViewabilityEvents=function(a,d){da.registerElement(a,.5,!0,!0,!0,e.onFiftyPercentViewabilityChange,d);da.registerElement(a,.01,!0,!0,!0,e.onOnePercentViewabilityChange,d)};this.onPlayBtnEventTriggered=
function(a,d,b){a=e.videoManagers[d].videoAdAttributes;e.metricsManager.reportVideoPlayButtonTriggered(d,a);if(null===b||void 0===b?0:b.onImmersiveVideoCallback)b.onImmersiveVideoCallback(a);else e.toggleVideosByPlayButton(d)};this.toggleVideosByPlayButton=function(a){e.pauseVideo(e.currentPlayingIndex);e.videoManagers[a].setMuteStatus(e.videoManagers[e.currentPlayingIndex].isMuted,V.INHERIT);e.playVideo(a)};this.enableAutoPlayForAllVideos=function(){e.videoManagers.forEach(function(a){a.setAutoPlayDisabled(!1)})};
this.isVideoPlaying=function(){return e.videoPlayersStatus.some(function(a){return a})};this.setConfigStyles=function(a,d){Object.assign(d.style,a)};this.carousel=gb["default"].getCarousel(w["default"].cardRoot.getElementsByClassName("a-carousel-container")[0]);this.metricsManager=f;this.controllerOptions=h;this.currentCarouselPage=this.currentPlayingIndex=0;this.prevPlayingIndex=-1;this.updateClientMetricsContext()}c.prototype.setupEventHandlers=function(f,h,e,a){var d,b,g,k,l,m,p;void 0===a&&(a=
{});return n.__awaiter(this,void 0,void 0,function(){var u,t,v,z,B,G,O,aa,H,A,Q,R,F,la,ma,ea,Ua,Wb,Va,Xb,Wa,Yb,Xa,Zb,$b,Fa,ac,Ya,bc,cc,dc,ec,Ga,fc,Za,$a,gc,ab,S,hc,ic,jc,fa,kc,lc,Hd=this;return n.__generator(this,function(ce){u=h.videoAdType;t=void 0===u?"":u;v=null!==(d=Vb[t])&&void 0!==d?d:{};z=v.brand;B=v.product;G=v.store;O=a.isItemOnFirstPage;H=(aa=a.selectors)?aa.brandElementSelector:void 0;A=this.controllerOptions;Q=A.isAdBlockerEnabled;R=A.shouldDelayMediaLoading;F=A.enableAutoScroll;la=void 0===
F?!1:F;ma=A.enableImmersiveVideo;ea=void 0===ma?!1:ma;Ua=A.showDealBadge;Wb=void 0===Ua?!1:Ua;Va=A.shouldEnableVideoCleanup;Xb=void 0===Va?!1:Va;Wa=A.shouldEnableReduceMotionEffects;Yb=void 0===Wa?!1:Wa;Xa=A.shouldLogAdUnitViewMetrics;Zb=void 0===Xa?!1:Xa;$b=A.clientWeblabHelper;Fa=f.querySelector('[data-type="videoContainer"]');(ac=f.querySelectorAll("a"))&&ac.forEach(function(Id){Id.addEventListener("click",function(){Hd.isALink=!0})});if(!Fa)return this.metricsManager.reportMissingVideoElement(h),
[2,!1];Zb&&(Ya=new Ub(f),Ya.attach());bc={onPlaybackCompletedCallback:la?this.onPlaybackCompletedCallback:void 0,onImmersiveVideoCallback:ea?this.onImmersiveVideoCallback:void 0};cc=new wb(this.metricsManager,h,bc,Ya);dc={isAdBlockerEnabled:Q,shouldEnablePlayButton:!0,shouldEnableVideoCleanup:Xb,shouldEnableReduceMotionEffects:Yb,clientWeblabHelper:$b};ec=R&&O?!1:R;Ga=new yb(Fa,cc,h,dc,!0,ec);Ga.init();this.videoManagers.push(Ga);this.setupViewabilityEvents(Fa,e);fc={onImmersiveVideoCallback:ea?this.onImmersiveVideoCallback:
void 0};this.setupPlayButtonEventHandlers(f,e,fc);Za=f.querySelector('[data-type="storeContainer"]');$a=f.querySelector('[data-type="productContainer"]');gc=f.querySelector('[id="ctaContainer"]');ab=f.querySelector(null!==H&&void 0!==H?H:W.BRAND_LOGO_HEADER_CONTAINER);S=f.querySelector(null!==H&&void 0!==H?H:W.BRAND_CONTAINER);hc=null!==(b=null===S||void 0===S?void 0:S.classList.contains("aok-hidden"))&&void 0!==b?b:!1;if(B){if(!$a)return this.metricsManager.reportMissingProductElement(h),[2,!1];
if(ic=f.querySelectorAll('[data-type="productTitle"]')[0])ic.style.display="-webkit-box"}if(z&&null===ab&&null===S)return this.metricsManager.reportMissingBrandElement(h),[2,!1];z&&hc&&(jc=null!==(k=null===(g=null===S||void 0===S?void 0:S.querySelector('[class*="nameContainer"] span'))||void 0===g?void 0:g.textContent)&&void 0!==k?k:"",fa=null!==(l=null===S||void 0===S?void 0:S.querySelector('a[class*="storeLink"]'))&&void 0!==l?l:null,this.metricsManager.reportMissingBrandElement(h,{storeName:jc,
storeUrl:null!==(m=null===fa||void 0===fa?void 0:fa.getAttribute("href"))&&void 0!==m?m:void 0,storeCta:null!==(p=null===fa||void 0===fa?void 0:fa.text)&&void 0!==p?p:void 0}));if(G&&!Za)return[2,!1];kc=new Bb(this.metricsManager,Ga);lc=new Cb({headlineElement:Za,brandElement:S,brandLogoElement:ab,callToActionElement:gc,productElements:[$a]},kc);lc.setupWidgetEvents();Wb&&Ab(f);return[2,!0]})})};return c}(),Jd=function(c){function f(h,e){var a=c.call(this,h,e)||this;a.start=function(){return n.__awaiter(a,
void 0,void 0,function(){var d,b,g,k,l,m,p=this;return n.__generator(this,function(u){switch(u.label){case 0:return d=this.controllerOptions,b=d.viewportConfig,g=d.selectors,this.carouselViewport=w["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0],b&&this.setConfigStyles(b,this.carouselViewport),k=w["default"].cardRoot.querySelectorAll(W.CARD_ITEM),k.forEach(function(t,v){return n.__awaiter(p,void 0,void 0,function(){var z,B,G;return n.__generator(this,function(O){switch(O.label){case 0:return(z=
v<this.carouselItemsPerPage())?this.logImpression(t,v):this.impFired[v]=!1,this.videoPlayersStatus[v]=!1,B=n.__assign(n.__assign({},JSON.parse(t.dataset.videoAdAttributesProps)),{carouselItemIndex:v}),t.style.visibility="inherit",[4,this.setupEventHandlers(t,B,v,{isItemOnFirstPage:z,selectors:g})];case 1:G=O.sent();if(!G)return[2];z&&this.updateMediaAssetSources(t,v);return[2]}})})}),[4,this.carousel.initialized];case 1:return u.sent(),this.displayOrHideCarouselButtons(),this.carousel.on("change:pageNumber",
this.onCarouselPageChange),l=pa["default"].getCarousel(Ja.unscope(this.carouselViewport)),m=l.getAttr("name"),y["default"].on("a:carousel:"+m+":change:pageSize",this.onPageSizeChange),l.strategies.display.repaint(l),[2]}})})};a.onPageSizeChange=function(){a.displayOrHideCarouselButtons();a.updateResidualMediaAssetsOnPage(a.currentPlayingIndex)};a.displayOrHideCarouselButtons=function(){var d=a.controllerOptions,b=d.isOptionalNavButton;if(d.shouldHideNavButtonOnPageChange){d=b?"a-carousel-goto-nextpage":
"a-carousel-right";b=w["default"].cardRoot.getElementsByClassName(b?"a-carousel-goto-prevpage":"a-carousel-left")[0];d=w["default"].cardRoot.getElementsByClassName(d)[0];var g=w["default"].cardRoot.getElementsByClassName("a-carousel-page-max")[0];g=parseInt(g.innerHTML,10);b&&b.classList.toggle("aok-hidden",0===a.currentCarouselPage);d&&d.classList.toggle("aok-hidden",a.currentCarouselPage+1===g)}};a.getNewIndicesOnPageChange=function(d,b,g){var k=a.impFired.length,l=d*g,m=b*g;if(a.controllerOptions.transitionStrategy===
ca.SEARCH_GRID){var p=Math.floor(k/g);g=k-g;d===p&&(l=g);b===p&&(m=g)}return{oldFirstIndex:m,newFirstIndex:l}};a.onCarouselPageChange=function(d){if(void 0===d)a.metricsManager.reportCarouselPageChanged(-1,-1);else{var b=d.newPageNumber-1,g=d.oldPageNumber-1;a.metricsManager.reportCarouselPageChanged(b,g);d=a.carouselItemsPerPage();var k=a.getNewIndicesOnPageChange(b,g,d);g=k.oldFirstIndex;k=k.newFirstIndex;a.logImpressionsForCarouselItems(b,k,d);a.videoManagers[k].setMuteStatus(a.videoManagers[a.currentPlayingIndex].isMuted,
V.INHERIT);a.setVideosOnPreviousPageOutOfView(g,k,d);a.setNewPageAndCurrentPlayingVideo(b,k);a.setVideosOnNewPageInView(k,d);a.displayOrHideCarouselButtons()}};a.logImpressionsForCarouselItems=function(d,b,g){d=g*(d+1);g=a.impFired.length;for(d=d<=g?d:g;b<d;b++)g=w["default"].cardRoot.querySelector('[data-index="'+b+'"]'),a.updateMediaAssetSources(g,b),a.logImpression(g,b)};a.setNewPageAndCurrentPlayingVideo=function(d,b){a.currentCarouselPage=d;a.isVideoOnCurrentCarouselPage(a.currentPlayingIndex,
d)&&a.controllerOptions.transitionStrategy!==ca.SEARCH_GRID||(a.currentPlayingIndex=b)};a.setVideosOnPreviousPageOutOfView=function(d,b,g){a.onFiftyPercentViewabilityChange(0,!1,a.currentPlayingIndex);g=d+g;for(a.controllerOptions.transitionStrategy===ca.SEARCH_GRID&&d<b&&(g=b);d<g&&d<a.videoManagers.length;d++)a.onOnePercentViewabilityChange(0,!1,d)};a.setVideosOnNewPageInView=function(d,b){for(var g=d;g<d+b&&g<a.videoManagers.length;g++)if(a.onOnePercentViewabilityChange(1,!0,g),a.isVideoPlaying())a.onFiftyPercentViewabilityChange(1,
!0,g)};a.onFiftyPercentViewabilityChange=function(d,b,g){a.isVideoOnCurrentCarouselPage(g,a.currentCarouselPage)&&(a.isALink?(a.isALink=!1,a.videoManagers[a.currentPlayingIndex].onFiftyPercentViewabilityChange(d,b,!0)):(a.videoPlayersStatus[g]=b,a.videoManagers[a.currentPlayingIndex].onFiftyPercentViewabilityChange(d,b)))};a.onOnePercentViewabilityChange=function(d,b,g){if(a.isVideoOnCurrentCarouselPage(g,a.currentCarouselPage))a.videoManagers[g].onOnePercentViewabilityChange(d,b)};a.isVideoOnCurrentCarouselPage=
function(d,b){var g=a.carouselItemsPerPage(),k=(b+1)*g,l=k-g;if(a.controllerOptions.transitionStrategy===ca.SEARCH_GRID){var m=a.impFired.length;b===Math.floor(m/g)&&(k=m,l=m-g)}return d>=l&&d<k};a.updateResidualMediaAssetsOnPage=function(d){if(a.controllerOptions.shouldDelayMediaLoading)for(var b=a.carouselItemsPerPage();d<(a.currentCarouselPage+1)*b&&d<a.videoManagers.length;d++){var g=w["default"].cardRoot.querySelector('[data-index="'+d+'"]');a.updateMediaAssetSources(g,d)}};a.carouselViewport=
w["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0];return a}n.__extends(f,c);f.prototype.handlePageLoad=function(){var h=this,e=w["default"].cardRoot.querySelectorAll(W.CARD_ITEM);e.length&&e.forEach(function(a,d){a&&d<h.carouselItemsPerPage()&&h.logImpression(a,d)})};return f}(mc),Kd=function(){return function(){var c=this;this.update=function(f){c.dots&&c.dots[f]&&(Uc(c.dots,"a-selected"),c.select(f))};this.getCarouselDots=function(){return c.dots};this.isCarouselDotSelected=
function(f){return c.dots&&c.dots[f]?c.dots[f].classList.contains("a-selected"):!1};this.select=function(f){c.dots&&c.dots[f]&&c.dots[f].classList.add("a-selected")};(this.dots=Array.prototype.slice.call(w["default"].cardRoot.querySelectorAll(".a-dots > li")))&&0<this.dots.length&&this.select(0)}}(),Ld=function(c,f){return n.__awaiter(void 0,void 0,void 0,function(){var h;return n.__generator(this,function(e){switch(e.label){case 0:return[4,new Promise(function(a,d){xc(["@m/mash"],function(b){a(Mc(b))},
d)})];case 1:return h=e.sent().navigate,(null===c||void 0===c?0:c.immersiveVideoDeepLinkUrl)&&h({url:c.immersiveVideoDeepLinkUrl,successCallback:function(){f.reportImmersiveVideoLoaded(c)},failCallback:function(a){f.reportImmersiveVideoFailed(a,c)}}),[2]}})})},Md=function(c){function f(h,e){var a=c.call(this,h,e)||this;a.cardItemsReceived=[];a.start=function(){return n.__awaiter(a,void 0,void 0,function(){var d,b,g,k,l=this;return n.__generator(this,function(m){switch(m.label){case 0:return d=this.controllerOptions,
b=d.viewportConfig,g=d.selectors,this.carouselViewport=w["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0],b&&this.setConfigStyles(b,this.carouselViewport),k=w["default"].cardRoot.querySelectorAll(W.CARD_ITEM),k.forEach(function(p,u){var t=n.__assign(n.__assign({},JSON.parse(p.dataset.videoAdAttributesProps)),{carouselItemIndex:u}),v=l.carouselItemsPerPage(),z=u<v;z?(l.logImpression(p,u),l.handleCardItemsReceived(0,t)):l.impFired[u]=!1;l.videoPlayersStatus[u]=!1;p.style.visibility=
"inherit";l.setupEventHandlers(p,t,u,{isItemOnFirstPage:z,selectors:g})&&(z||u<v+1)&&l.updateMediaAssetSources(p,u)}),[4,this.carousel.initialized];case 1:return m.sent(),this.carousel.on("change:pageNumber",function(p){return l.onCarouselPageChange(p)}),[2]}})})};a.handleCardItemsReceived=function(d,b){a.cardItemsReceived[d]||(a.metricsManager.reportCardItemReceived(d,b),a.cardItemsReceived[d]=!0)};a.onPlaybackCompletedCallback=function(){var d=a.controllerOptions.enableAutoScroll;if(void 0===d?
0:d)a.autoScrolled=!0,a.carousel.gotoNextPage()};a.onCarouselPageChange=function(d){var b;if(void 0===d)a.metricsManager.reportCarouselPageChanged(-1,-1);else{var g=d.newPageNumber-1;d=d.oldPageNumber-1;null===(b=a.pagination)||void 0===b?void 0:b.update(g);a.updateCarouselFirstItemMargin(0===g);a.metricsManager.reportCarouselPageChanged(g,d,a.autoScrolled);a.autoScrolled=!1;b=a.videoManagers[a.currentPlayingIndex].isMuted;var k=V.INHERIT;Y.isIOS()&&(b=!0,k=V.WEBKIT_MUTED);a.videoManagers[g].setMuteStatus(b,
k);a.onOnePercentViewabilityChange(0,!1,a.currentPlayingIndex);a.currentPlayingIndex=g;a.currentCarouselPage=g;a.prevPlayingIndex=d;b=w["default"].cardRoot.querySelector('[data-index="'+a.currentPlayingIndex+'"]');k=w["default"].cardRoot.querySelector('[data-index="'+(a.currentPlayingIndex+1)+'"]');a.updateMediaAssetSources(k,a.currentPlayingIndex+1);a.logImpression(b,a.currentPlayingIndex);a.handleCardItemsReceived(a.currentPlayingIndex,a.videoManagers[a.currentPlayingIndex].videoAdAttributes);a.onOnePercentViewabilityChange(1,
!0,g);if(a.isVideoPlaying())a.onFiftyPercentViewabilityChange(1,!0,g);a.onFiftyPercentViewabilityChange(0,!1,d)}};a.onFiftyPercentViewabilityChange=function(d,b,g){var k=a.controllerOptions.carouselDisplayStrategy===T.SINGLE_ELEMENT?!(b&&g!==a.currentPlayingIndex):!0;g!==a.currentPlayingIndex&&g!==a.prevPlayingIndex||!k||(a.isALink?(a.isALink=!1,a.videoManagers[g].onFiftyPercentViewabilityChange(d,b,!0)):(a.videoPlayersStatus[g]=b,a.videoManagers[g].onFiftyPercentViewabilityChange(d,b)))};a.onOnePercentViewabilityChange=
function(d,b,g){if(g===a.currentCarouselPage)a.videoManagers[g].onOnePercentViewabilityChange(d,b)};a.getCarouselFirstItemMarginCalculations=function(d,b,g,k){switch(k){case T.SINGLE_ELEMENT:return(d-b)/2+g;default:return(d-b-5)/2}};a.updateCarouselFirstItemMargin=function(d){var b=a.controllerOptions,g=b.minimumGutterWidth;g=void 0===g?9:g;var k=b.carouselDisplayStrategy;if(b.shouldPeekCarouselItems){b=w["default"].cardRoot.getElementsByClassName("a-carousel")[0];var l=g,m=w["default"].cardRoot.querySelectorAll(W.CARD_ITEM);
d?1===m.length&&(l=0):l=a.getCarouselFirstItemMarginCalculations(screen.width,m[0].clientWidth,g,k);b.style.marginLeft=l.toString()+"px"}};a.updateCarouselFirstItemMargin(!0);a.autoScrolled=!1;a.controllerOptions.enablePaginationDots&&(a.pagination=new Kd);a.carouselViewport=w["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0];return a}n.__extends(f,c);f.prototype.handlePageLoad=function(){var h=this,e=w["default"].cardRoot.querySelectorAll(W.CARD_ITEM);e.length&&e.forEach(function(a,
d){a&&d<h.carouselItemsPerPage()&&(a=JSON.parse(e[d].dataset.videoAdAttributesProps),h.logImpression(e[d],d),h.handleCardItemsReceived(d,a))})};f.prototype.onImmersiveVideoCallback=function(h){Ld(h,this.metricsManager)};return f}(mc),nc;(nc||(nc={})).UNBRANDED_PDP="unbranded-pdp";var oc;(function(c){c.Asin="ASIN";c.Brand="BRAND";c.Video="VIDEO";c.Uri="URI"})(oc||(oc={}));var ua;(function(c){c.DETAIL="Detail";c.SEARCH="Search"})(ua||(ua={}));var Ha;(Ha||(Ha={})).SEARCH_GRID="searchGrid";var pc;(pc||
(pc={})).SponsoredBrandsIngress="sponsoredbrands";var na;(function(c){c.AF="AF";c[c.NONE=0]="NONE";c[c.MICRO=100]="MICRO";c[c.SMALL=500]="SMALL";c[c.LARGE=1E3]="LARGE"})(na||(na={}));var qc=function(){return function(c,f){var h,e=this;this.getTreatment=function(l,m){void 0===m&&(m=!0);if(0===e.weblabsMap.size)ha["default"].log("There are no weblabs information found by ClientWebLapHlper","ERROR",e.attribution);else{if(e.weblabsMap.has(l)){var p=e.weblabsMap.get(l);if(void 0===p){ha["default"].log("No treatment found in weblab map for "+
l,"ERROR",e.attribution);return}if(m)try{Oc["default"].trigger(l,p)}catch(u){}return p}ha["default"].log("Get treatment for unknown weblab","ERROR",e.attribution)}};var a=new Map;c=c.split(",").filter(function(l){return 0<l.length});if(0<c.length)try{for(var d=n.__values(c),b=d.next();!b.done;b=d.next()){var g=b.value.split(":");a.set(g[0].trim(),g[1].trim())}}catch(l){var k={error:l}}finally{try{b&&!b.done&&(h=d.return)&&h.call(d)}finally{if(k)throw k.error;}}this.weblabsMap=a;this.attribution=f}}(),
rc;(function(c){c.DEFAULT="Default";c.PRODUCT_WITH_TINTED_CTA="ProductWithTintedCta";c.STORE_VERTICAL_VIDEO="StoreVerticalVideo"})(rc||(rc={}));var bb;(function(c){c.DEFAULT="Default";c.PRODUCT_WITH_TINTED_CTA="ProductWithTintedCta"})(bb||(bb={}));var sc;(function(c){c.DEFAULT="Default";c.DEALS="Deals"})(sc||(sc={}));var Nd=function(c,f,h){y["default"].on("a:truncate:"+c+":updated",function(e){var a,d;e=e.truncateInstance;var b=w["default"].cardRoot.querySelector(f),g=null===b||void 0===b?void 0:
b.getAttribute(h);b&&g&&e.getTruncatedText()!==e.getFullText()&&(null===(d=null===(a=e._$cut)||void 0===a?void 0:a.html)||void 0===d?void 0:d.call(a,g))});Ic.refreshAutoTruncate()},Od={method:"HEAD",mode:"no-cors",headers:{"Content-Type":"plain/text"}},tc=function(c){return"mobile"===xa()||(null===c||void 0===c?void 0:c.getTreatment(J.ADPT_SBV_1041956))!==C.T1?Promise.resolve(!1):Xc("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?_=1607460946161",2E3,Od).then(function(){return!1}).catch(function(){return!0})},
Rd=function(c){return n.__awaiter(void 0,void 0,void 0,function(){var f,h,e,a,d,b,g,k,l,m,p;return n.__generator(this,function(u){switch(u.label){case 0:f=c.cardName;h=c.isDesktop;e=c.viewMetricsOptions;a=void 0===e?{}:e;d=c.visibilityThreshold;if(!w["default"].cardRoot.dataset.props)return D.count(f+"-NoProps"),[2];h&&Pd();jb();b=JSON.parse(w["default"].cardRoot.dataset.props);u.label=1;case 1:return u.trys.push([1,3,,4]),g=new qc(b.weblabs,b.widgetType),k=g.getTreatment(J.ADPT_SBV_956803)===C.T1,
l=new rb({clientId:b.clientId,deviceEnv:tb(),deviceOs:ub(),deviceType:xa(),language:b.language,marketplaceId:b.marketplaceId,pageType:b.pageType,stage:Na.getStage(),weblabs:b.weblabs,widgetGroupId:b.widgetGroupId,widgetIndex:b.widgetIndex,widgetType:b.widgetType,searchQuery:b.searchQuery,experience:b.experience,experienceVariation:b.experienceVariation},sb(b.marketplaceId),n.__assign({shouldLogAdUnitViewMetrics:k},a)),b.widgetType===N.SHORT_FORM_VIDEO&&va["default"].visible().then(function(){l.reportWidgetOnScreen()}),
c.strategy===Ha.SEARCH_GRID&&(od.registerStrategy(ja.SEARCH_GRID),kd.registerStrategy(T.SEARCH_GRID)),[4,Qd(l,c,g,k)];case 2:return m=u.sent(),b.experience===bb.PRODUCT_WITH_TINTED_CTA.toString()&&Nd("sbvTintedCtaText",'[id="ctaLink"]',"data-alternatectatext"),null!==d&&void 0!==d?d===na.AF?P.when("af").execute(function(){return cb(g,b,l,m,c)}):va["default"].visible(d).then(function(){cb(g,b,l,m,c)}):cb(g,b,l,m,c),[3,4];case 3:return p=u.sent(),ha["default"].log(p,"ERROR",b.widgetType),ha["default"].log("SBV multi-brand-video client setup failed",
"ERROR",b.widgetType),[3,4];case 4:return[2]}})})},Qd=function(c,f,h,e){return n.__awaiter(void 0,void 0,void 0,function(){var a,d,b,g,k,l;return n.__generator(this,function(m){switch(m.label){case 0:return a=f.controllerOptions,d=f.isDesktop,b=f.shouldDelayMediaLoading,g=f.showDealBadge,[4,tc(h)];case 1:return k=m.sent(),l=n.__assign(n.__assign({},a),{isAdBlockerEnabled:k,shouldDelayMediaLoading:b,showDealBadge:g,shouldEnableVideoCleanup:Sb(h),shouldEnableReduceMotionEffects:h.getTreatment(J.SBV_842986)===
C.T1,shouldLogAdUnitViewMetrics:e,clientWeblabHelper:h}),[2,d?new Jd(c,l):new Md(c,l)]}})})},cb=function(c,f,h,e,a){return n.__awaiter(void 0,void 0,void 0,function(){var d,b,g,k;return n.__generator(this,function(l){switch(l.label){case 0:d=a.cardName;b=a.minNumberOfVideos;g=void 0===b?2:b;k=w["default"].cardRoot.querySelectorAll(W.CARD_ITEM);if(null===k||void 0===k||!k.length)return D.count(d+"-NoAds"),h.reportNoAdError(),[2];(null===k||void 0===k?void 0:k.length)<g&&(D.count(d+"-NumOfAdsLessThanMin"),
h.reportNumOfAdsLessThanMinRequirement());if(f.pageType===ua.DETAIL){l=w["default"].cardRoot.getElementsByClassName("a-carousel-header-row")[0];var m=w["default"].cardRoot.getElementsByClassName("a-carousel-heading")[0];l&&m&&(m.classList.add("featureHeading"),l.style.visibility="visible")}h.reportResponseReceived(k.length);Sd(c,h,a);return[4,e.start()];case 1:return l.sent(),[2]}})})},Sd=function(c,f,h){return n.__awaiter(void 0,void 0,void 0,function(){var e,a,d;return n.__generator(this,function(b){e=
c.getTreatment(J.SBV_672322)===C.T1;a=h.cardName;d=h.enableAdFeedback;nb(f,{cardName:a,enableAdFeedback:d,isAdFeedbackForCards:e});return[2]})})},Pd=function(){var c=w["default"].cardRoot.getElementsByClassName("a-carousel-left")[0],f=w["default"].cardRoot.getElementsByClassName("a-carousel-right")[0];if(c){var h=c.getElementsByClassName("a-carousel-button")[0];c.style.height="100%";h.style.top="45%"}f&&(f.style.height="100%",f.getElementsByClassName("a-carousel-button")[0].style.top="45%")},Td=function(){return function(c,
f,h,e,a,d,b,g){var k=this;void 0===e&&(e=!1);void 0===a&&(a=!1);void 0===d&&(d=!1);void 0===b&&(b=!1);void 0===g&&(g=!1);this.isALink=!1;this.videoManagers=[];this.videoPlayersStatus=[];this.impFired=[];this.carouselItemsPerPage=function(){var l=k.carouselViewport.clientWidth,m=w["default"].cardRoot.getElementsByClassName("a-carousel-card")[0].clientWidth;return Math.floor(l/(m+18))};this.start=function(){return n.__awaiter(k,void 0,void 0,function(){var l,m,p=this;return n.__generator(this,function(u){switch(u.label){case 0:return this.carouselViewport=
w["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0],l=w["default"].cardRoot.querySelectorAll('[data-type="mbvItem"]'),l.forEach(function(t,v){var z,B,G,O,aa,H;v<p.carouselItemsPerPage()?p.logImpression(t,v):p.impFired[v]=!1;p.videoPlayersStatus[v]=!1;var A=JSON.parse(t.dataset.videoAdAttributesProps);t.style.visibility="inherit";t.querySelectorAll('[data-type="productTitle"]')[0].style.display="-webkit-box";var Q=t.querySelector('[data-type="videoContainer"]'),R=t.querySelector('[data-type="productContainer"]'),
F=t.querySelector('[data-type="brandContainer"]'),la=null!==(z=null===F||void 0===F?void 0:F.classList.contains("aok-hidden"))&&void 0!==z?z:!1;(z=t.querySelectorAll("a"))&&z.forEach(function(ea){ea.addEventListener("click",function(){p.isALink=!0})});if(Q)if(R)if(null===F)p.metricsManager.reportMissingBrandElement(A);else{la&&(la=null!==(G=null===(B=null===F||void 0===F?void 0:F.querySelector('[class*="nameContainer"] span'))||void 0===B?void 0:B.textContent)&&void 0!==G?G:"",B=null!==(O=null===
F||void 0===F?void 0:F.querySelector('a[class*="storeLink"]'))&&void 0!==O?O:null,p.metricsManager.reportMissingBrandElement(A,{storeName:la,storeUrl:null!==(aa=null===B||void 0===B?void 0:B.getAttribute("href"))&&void 0!==aa?aa:void 0,storeCta:null!==(H=null===B||void 0===B?void 0:B.text)&&void 0!==H?H:void 0}));if(p.shouldLogAdUnitViewMetrics){var ma=new Ub(t);ma.attach()}O=new wb(p.metricsManager,A,{},ma);A=new yb(Q,O,A,{isAdBlockerEnabled:p.isAdBlockerEnabled,shouldEnablePlayButton:!0,shouldEnableVideoCleanup:p.shouldEnableVideoCleanup,
shouldEnableReduceMotionEffects:p.shouldEnableReduceMotionEffects,clientWeblabHelper:p.clientWeblabHelper},!0,p.shouldDelayLoadingVideos);A.init();p.videoManagers.push(A);da.registerElement(Q,.5,!0,!0,!0,p.onFiftyPercentViewabilityChange,v);da.registerElement(Q,.01,!0,!0,!0,p.onOnePercentViewabilityChange,v);Q=new Bb(p.metricsManager,A);(new Cb({brandElement:F,productElements:[R]},Q)).setupWidgetEvents();(R=t.querySelector('[data-type="playIcon"]'))&&R.addEventListener("click",function(ea){return p.onPlayBtnEventTriggered(ea,
v)});p.shouldShowDealBadge&&Ab(t)}else p.metricsManager.reportMissingProductElement(A);else p.metricsManager.reportMissingVideoElement(A)}),[4,this.carousel.initialized];case 1:return u.sent(),this.carousel.on("change:pageNumber",this.onCarouselPageChange),m=pa["default"].getCarousel(Ja.unscope(this.carouselViewport)),m.strategies.display.repaint(m),[2]}})})};this.getDynamicMetricAttributes=function(){var l;return l={},l[q.CAROUSEL_ITEM_INDEX]=k.currentPlayingIndex,l[q.CAROUSEL_PAGE_NUMBER]=k.currentCarouselPage,
l};this.logImpression=function(l,m){if(!k.impFired[m]&&(l=l.querySelector('[data-type="ip"]'))){var p=l.getAttribute("data-src");p&&(l.setAttribute("src",p),k.impFired[m]=!0)}};this.updateClientMetricsContext=function(){k.metricsManager.setClientMetricsContext({getDynamicMetricsAttributes:k.getDynamicMetricAttributes})};this.onCarouselPageChange=function(l){if(void 0===l)k.metricsManager.reportCarouselPageChanged(-1,-1);else{var m=l.newPageNumber-1,p=l.oldPageNumber-1;k.metricsManager.reportCarouselPageChanged(m,
p);l=k.carouselItemsPerPage();var u=m*l;p*=l;var t=l*(m+1),v=k.impFired.length;t=t<=v?t:v;for(v=u;v<t;v++){var z=w["default"].cardRoot.querySelector('[data-index="'+v+'"]');k.logImpression(z,v)}k.videoManagers[u].setMuteStatus(k.videoManagers[k.currentPlayingIndex].isMuted,V.INHERIT);k.onFiftyPercentViewabilityChange(0,!1,k.currentPlayingIndex);for(t=p;t<p+l&&t<k.videoManagers.length;t++)k.onOnePercentViewabilityChange(0,!1,t);k.currentCarouselPage=m;k.isVideoOnCurrentCarouselPage(k.currentPlayingIndex,
m)||(k.currentPlayingIndex=u);for(t=u;t<u+l&&t<k.videoManagers.length;t++)if(k.onOnePercentViewabilityChange(1,!0,t),k.isMbvVideoPlaying())k.onFiftyPercentViewabilityChange(1,!0,t)}};this.onPlayBtnEventTriggered=function(l,m){k.metricsManager.reportVideoPlayButtonTriggered(m,k.videoManagers[m].videoAdAttributes);k.pauseVideo(k.currentPlayingIndex);k.videoManagers[m].setMuteStatus(k.videoManagers[k.currentPlayingIndex].isMuted,V.INHERIT);k.playVideo(m)};this.pauseVideo=function(l){k.videoManagers[l].pause()};
this.playVideo=function(l){k.enableAutoPlayForAllVideos();k.videoManagers[l].play();k.currentPlayingIndex=l};this.isMbvVideoPlaying=function(){return k.videoPlayersStatus.some(function(l){return l})};this.onFiftyPercentViewabilityChange=function(l,m,p){k.isVideoOnCurrentCarouselPage(p,k.currentCarouselPage)&&(k.isALink?(k.isALink=!1,k.videoManagers[k.currentPlayingIndex].onFiftyPercentViewabilityChange(l,m,!0)):(k.videoPlayersStatus[p]=m,k.videoManagers[k.currentPlayingIndex].onFiftyPercentViewabilityChange(l,
m)))};this.onOnePercentViewabilityChange=function(l,m,p){if(k.isVideoOnCurrentCarouselPage(p,k.currentCarouselPage))k.videoManagers[p].onOnePercentViewabilityChange(l,m)};this.enableAutoPlayForAllVideos=function(){k.videoManagers.forEach(function(l){l.setAutoPlayDisabled(!1)})};this.isVideoOnCurrentCarouselPage=function(l,m){var p=k.carouselItemsPerPage();m=(m+1)*p;return l>=m-p&&l<m};this.carousel=gb["default"].getCarousel(w["default"].cardRoot.getElementsByClassName("a-carousel-container")[0]);
this.metricsManager=c;this.shouldDelayLoadingVideos=f;this.clientWeblabHelper=h;this.shouldShowDealBadge=e;this.shouldEnableVideoCleanup=a;this.shouldEnableReduceMotionEffects=d;this.shouldLogAdUnitViewMetrics=b;this.currentCarouselPage=this.currentPlayingIndex=0;this.isAdBlockerEnabled=g;this.updateClientMetricsContext()}}(),oa=function(c,f){return c.querySelector("[class*="+f+"]")},Ud=function(c,f,h){c=JSON.parse(c);c.adCreativeMetaData=f.adCreativeMetaData;c.feedbackFormContainerId=h;return encodeURI(JSON.stringify(c))},
Vd=function(c,f,h,e){return n.__awaiter(void 0,void 0,void 0,function(){var a,d,b,g,k,l,m;return n.__generator(this,function(p){a="adFeedbackModal_"+c;p=(null===(m=oa(f,"ad-feedback-modal-container"))||void 0===m?void 0:m.className)||"";d="."+f.className+" ."+p.replace(" ",".");g=(b=h().adCreativeMetaData.adCreativeDetails)?b.length:0;k={a11yOpenMessage:"",width:Math.max(560,132*g+160),a11yCloseButtonMessage:e};try{return l=Pc["default"].create(a,d,k),[2,l]}catch(u){throw D.count("adfeedback:cards:clientDesktop:modalCreation:failure",
1),Error("Modal Creation Failed : "+u);}})})},Yd=function(c,f,h,e,a,d){var b="rtl"===document.getElementsByTagName("html")[0].dir?"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";var g=oa(ba["default"].cardRoot,b);c.on("beforeShow",function(){return n.__awaiter(void 0,void 0,void 0,function(){var k;return n.__generator(this,function(l){switch(l.label){case 0:return k=Wd(c,f,h),[4,c.render(function(m){var p="250px",u=h().adCreativeMetaData.adCreativeDetails;u&&2>u.length&&(p="150px");
g.style.marginTop=p;m.innerHTML="";p=m.appendChild;u=document.getElementsByTagName("html")[0].dir;var t=ba["default"].createElement("div"),v=ba["default"].createElement("div");t.innerHTML=a;"rtl"===u?(t.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 28px; margin-right: 0px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 0px; padding-right: 25px; padding-top: 16px; text-align: right; text-rendering: optimizelegibility; visibility: visible;'),
v.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to left, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: right; visibility: visible; z-index: 10;')):
(t.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 0px; margin-right: 28px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 25px; padding-right: 0px; padding-top: 16px; text-align: left; text-rendering: optimizelegibility; visibility: visible;'),v.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to right, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: left; visibility: visible; z-index: 10;'));
v.appendChild(t);p.call(m,v);p=document.getElementsByTagName("html")[0].dir;u=ba["default"].createElement("div");"rtl"===p?u.setAttribute("style","padding-bottom: 16px; padding-right: 50px ; padding-top: 16px; justify-content: center; align-items: center;"):u.setAttribute("style","padding-bottom: 16px; padding-left: 50px ; padding-top: 16px; justify-content: center; align-items: center;");Xd(g,u,e,k,d);m.appendChild(u)})];case 1:return l.sent(),[2]}})})})},Wd=function(c,f,h){h=h();var e=h.adCreativeMetaData.adCreativeDetails;
null===e||void 0===e?void 0:e.sort(function(a,d){return a.adCreativeIndex<d.adCreativeIndex?-1:1});return Ud(f,h,c.id)},Xd=function(c,f,h,e,a){f.appendChild(c);"function"==typeof D.uet&&D.uet("bb","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});Qc["default"].post("/af/multi-creative/feedback-form",{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===h?"en-US":h}},{pl:e,deviceType:"desktop"}).then(function(d){return n.__awaiter(void 0,
void 0,void 0,function(){var b,g,k;return n.__generator(this,function(l){"function"==typeof D.uet&&D.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});D.count("adfeedback:cards:clientDesktop:fetchFormContent:success",1);b=ba["default"].createElement("div");b.innerHTML=String(d.responseBody);for(g=0;g<b.children.length;++g)k=b.children[g],"SCRIPT"===k.tagName?db("script",k,f):"LINK"===k.tagName?db("link",k,f):db("div",k,f);f.removeChild(c);return[2]})})}).catch(function(){"function"==
typeof D.uet&&D.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});D.count("adfeedback:cards:clientDesktop:fetchFormContent:failure",1);f.innerHTML=a});"function"==typeof D.uex&&D.uex("ld","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1})},db=function(c,f,h){var e=ba["default"].createElement(c);e.innerHTML=f.innerHTML;f.getAttributeNames().forEach(function(a){e.setAttribute(a,f.getAttribute(a)||"")});h.appendChild(e)},uc={},Zd=function(c,f){return n.__awaiter(void 0,
void 0,void 0,function(){var h,e,a,d,b,g,k,l,m,p;return n.__generator(this,function(u){h=oa(c,"ad-feedback-primary-link");e=f().adFeedbackLabelId;a=hb["default"].setup();d="open-modal"+e;b=f().adCreativeMetaData.adCreativeDetails;g=c.dataset;k=g.isDsaEnabled;l=g.weblabTreatment;m=g.closeButtonAriaText;p=String(k);"undefined"===p&&(p=b&&0<b.length?b[0].selectionSignals?"true":"false":"false");"true"===p&&"T1"!==l&&(p="false");a.attach(d,h);a.define(d,"click",function(){return n.__awaiter(void 0,void 0,
void 0,function(){var t;return n.__generator(this,function(v){switch(v.label){case 0:return(t=uc[e])?[3,2]:[4,Vd(e,c,f,m)];case 1:t=v.sent();var z=c.dataset,B=z.formHeaderText,G=z.dsaFormHeaderText;Yd(t,z.adFeedbackPayload,f,z.currentLocale,"true"===p?G:B,z.formLoadErrorText);uc[e]=t;v.label=2;case 2:return t.show(),[2]}})})});try{h.addEventListener("keydown",function(t){if(" "===t.key||"Enter"===t.key)t.preventDefault(),h.click()})}catch(t){console.log("Couldnt add keydown event listner")}return[2]})})},
$d=function(c,f){var h=hb["default"].setup(),e="mouse-enter"+f;f="mouse-leave"+f;var a=oa(c,"ad-feedback-primary-link"),d=oa(c,"ad-feedback-text-desktop"),b=oa(c,"ad-feedback-sprite");h.attach(e,a);h.define(e,"mouseenter",function(){b.style.backgroundPosition="0px -12px";d.style.color="#111111"});h.attach(f,a);h.define(f,"mouseleave",function(){b.style.backgroundPosition="0px 0px";d.style.color="#555"})},vc=function(c){return n.__awaiter(void 0,void 0,void 0,function(){var f,h,e,a;return n.__generator(this,
function(d){switch(d.label){case 0:return d.trys.push([0,3,,4]),f=c(),h=w["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+f.adFeedbackLabelId)[0],e=h.dataset.isSponsoredLabelActive,"false"===(e||"false").toLowerCase()?[2]:[4,$d(h,f.adFeedbackLabelId)];case 1:return d.sent(),[4,Zd(h,c)];case 2:return d.sent(),[3,4];case 3:throw a=d.sent(),D.count("adfeedback:cards:clientDesktop:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for desktop client : "+a);case 4:return[2]}})})},
eb=function(){return n.__awaiter(void 0,void 0,void 0,function(){var c,f,h,e,a,d,b,g,k,l,m;return n.__generator(this,function(p){switch(p.label){case 0:if(!w["default"].cardRoot.dataset.props)return D.count("sbvMultiBrandVideoNoProps"),[2];c=JSON.parse(w["default"].cardRoot.dataset.props);f=new qc(c.weblabs,N.MULTI_BRAND_VIDEO);h=c.pageType;a=(e=h===ua.DETAIL)&&f.getTreatment(J.ADPT_SBV_959560)===C.T1;d=h===ua.SEARCH&&f.getTreatment(J.SBV_620753)===C.T1;b=e&&f.getTreatment(J.SBV_668132)===C.T1;g=
f.getTreatment(J.MBV_394048)||"";k=ae(g);if(!a&&!d)return[3,2];l=f.getTreatment(J.SBV_642751)===C.T1;m={shouldLogViewMetrics:!0,shouldBillViewMetrics:!0};return[4,Rd({cardName:"multi-brand-video-desktop",controllerOptions:{isOptionalNavButton:d,minimumGutterWidth:d?0:18,shouldHideNavButtonOnPageChange:d,transitionStrategy:d?ca.SEARCH_GRID:void 0,viewportConfig:{height:"380px"}},enableAdFeedback:vc,isDesktop:!0,shouldDelayMediaLoading:l,visibilityThreshold:k,viewMetricsOptions:m,showDealBadge:b,showEELBadge:f.getTreatment(J.SBV_656845)===
C.T1,strategy:d?Ha.SEARCH_GRID:void 0})];case 1:return p.sent(),[3,3];case 2:jb(),be(),null!==k?va["default"].visible(k).then(function(){wc(f,c,g,b)}):wc(f,c,g,b),p.label=3;case 3:return[2]}})})},wc=function(c,f,h,e){void 0===e&&(e=!1);return n.__awaiter(void 0,void 0,void 0,function(){var a,d,b,g,k,l,m,p,u,t,v,z;return n.__generator(this,function(B){switch(B.label){case 0:a=c.getTreatment(J.SBV_672322)===C.T1;d=c.getTreatment(J.ADPT_SBV_956803)===C.T1;b={shouldLogViewMetrics:!0,shouldBillViewMetrics:!0,
shouldLogAdUnitViewMetrics:d};g=h===C.T4||h===C.T5||h===C.T6||h===C.T7;k=new rb({clientId:f.clientId,deviceEnv:tb(),deviceOs:ub(),deviceType:xa(),language:f.language,marketplaceId:f.marketplaceId,pageType:f.pageType,stage:Na.getStage(),weblabs:f.weblabs,widgetGroupId:f.widgetGroupId,widgetIndex:void 0,widgetType:f.widgetType},sb(f.marketplaceId),b);l=w["default"].cardRoot.querySelectorAll('[data-type="mbvItem"]');if(null===l||void 0===l||!l.length)return D.count("sbvMultiBrandVideoNoAds"),k.reportNoAdError(),
[2];2>(null===l||void 0===l?void 0:l.length)&&(D.count("sbvMultiBrandVideoNumOfAdsLessThanMin"),k.reportNumOfAdsLessThanMinRequirement());m=w["default"].cardRoot.getElementsByClassName("a-carousel-header-row")[0];p=w["default"].cardRoot.getElementsByClassName("a-carousel-heading")[0];p.classList.add("featureHeading");m.style.visibility="visible";Ma();k.reportResponseReceived(l.length);nb(k,{cardName:"sbvMultiBrandVideo",enableAdFeedback:vc,isAdFeedbackForCards:a});u=Sb(c);t=c.getTreatment(J.SBV_842986)===
C.T1;return[4,tc(c)];case 1:return v=B.sent(),z=new Td(k,g,c,e,u,t,d,v),[4,z.start()];case 2:return B.sent(),[2]}})})},be=function(){var c=w["default"].cardRoot.getElementsByClassName("a-carousel-left")[0],f=w["default"].cardRoot.getElementsByClassName("a-carousel-right")[0];c.style.height="100%";f.style.height="100%";c=c.getElementsByClassName("a-carousel-button")[0];f=f.getElementsByClassName("a-carousel-button")[0];c.style.top="45%";f.style.top="45%"},ae=function(c){switch(c){case C.T1:case C.T5:return na.NONE;
case C.T2:case C.T6:return na.MICRO;case C.T3:case C.T7:return na.SMALL;default:return null}};Ia._operationNames=[];Ia.card=function(){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(c){va["default"].pageReady.then(eb,eb);return[2]})})};Ia.initOnReady=eb});
